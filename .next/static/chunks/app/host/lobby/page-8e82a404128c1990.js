(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{846:(e,s,a)=>{"use strict";a.d(s,{GameProvider:()=>i,I:()=>r});var c=a(5155),l=a(2115);let t={playerName:"",selectedTopicId:null,topicTitle:"",selectedQuestions:10,selectedDifficulty:"easy",selectedSpaceship:null,currentQuestionIndex:0,score:0,correctAnswers:0,questions:[],miniGamesCompleted:0,gameStats:{hits:0,asteroidsDestroyed:0,gameScore:0,bossDestroyed:!1,success:!1},isEliminated:!1},n=(0,l.createContext)(void 0);function i(e){let{children:s}=e,[a,i]=(0,l.useState)(t),[r,o]=(0,l.useState)(!1),d=(0,l.useCallback)(()=>{o(!0)},[]),h=(0,l.useCallback)(()=>{setTimeout(()=>o(!1),300)},[]),m=(0,l.useCallback)(()=>{i(t)},[]);return(0,c.jsx)(n.Provider,{value:{gameState:a,setGameState:i,isLoading:r,showLoading:d,hideLoading:h,resetGame:m},children:s})}function r(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}},1625:(e,s,a)=>{Promise.resolve().then(a.bind(a,2327))},2327:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var c=a(5155),l=a(2115),t=a(63),n=a(2834),i=a(846),r=a(1285);function o(e){let{isOpen:s,onClose:a,gameCode:t,joinUrl:i}=e,[r,o]=(0,l.useState)(!1);if(!s)return null;let d=async()=>{try{await navigator.clipboard.writeText(i),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy link:",e)}};return(0,c.jsx)("div",{className:"dialog-overlay",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,c.jsxs)("div",{className:"dialog-content qr-dialog",children:[(0,c.jsx)("button",{className:"dialog-close",onClick:a,children:(0,c.jsx)("span",{children:"✕"})}),(0,c.jsx)("h2",{className:"dialog-title",children:"QR CODE"}),(0,c.jsx)("p",{className:"dialog-subtitle",children:"Scan to join the mission"}),(0,c.jsx)("div",{className:"qr-code-large",children:(0,c.jsxs)("div",{className:"qr-code-frame",children:[(0,c.jsx)("div",{className:"qr-corner top-left"}),(0,c.jsx)("div",{className:"qr-corner top-right"}),(0,c.jsx)("div",{className:"qr-corner bottom-left"}),(0,c.jsx)("div",{className:"qr-corner bottom-right"}),(0,c.jsx)(n.h,{value:i,size:280,bgColor:"transparent",fgColor:"#00d4ff",level:"H"})]})}),(0,c.jsxs)("div",{className:"game-code-display-large",children:[(0,c.jsx)("span",{className:"code-label",children:"ACCESS KEY"}),(0,c.jsx)("span",{className:"code-value",children:t})]}),(0,c.jsx)("div",{className:"dialog-actions",children:(0,c.jsx)("div",{className:"url-card-container",children:(0,c.jsxs)("div",{className:"url-card",children:[(0,c.jsx)("span",{className:"url-text",children:i}),(0,c.jsx)("button",{className:"url-copy-btn ".concat(r?"success":""),onClick:d,title:"Copy link",children:(0,c.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),(0,c.jsx)("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]})})]})})})]})})}var d=a(5620);function h(){let e=(0,t.useRouter)(),{gameState:s}=(0,i.I)(),[a,h]=(0,l.useState)(""),[m,u]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1),[p,N]=(0,l.useState)(!1),[v,b]=(0,l.useState)("");(0,l.useEffect)(()=>{b("".concat(window.location.origin,"/?code=").concat(a))},[a]),(0,l.useEffect)(()=>{let e=(0,r.jH)();return h(e),(0,d.TT)(e,s.playerName||"Host",s.selectedTopicId,s.topicTitle||"Quiz",s.selectedQuestions||10,s.selectedDifficulty||"medium"),()=>{}},[s]),(0,l.useEffect)(()=>{let e=setInterval(()=>{u((0,d.bj)())},1e3);return()=>clearInterval(e)},[]);let f=async()=>{try{await navigator.clipboard.writeText(a),N(!0),setTimeout(()=>N(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,c.jsxs)("section",{className:"host-lobby-screen",children:[(0,c.jsxs)("header",{className:"host-header",children:[(0,c.jsx)("div",{className:"host-brand",children:(0,c.jsx)("div",{className:"brand-text",children:(0,c.jsx)("h1",{className:"brand-title",children:"ASTRO LEARNING"})})}),(0,c.jsxs)("div",{className:"host-actions",children:[(0,c.jsxs)("button",{className:"btn-end-session",onClick:()=>{confirm("Are you sure you want to end this session?")&&((0,d.S0)(),e.push("/"))},children:[(0,c.jsx)("span",{className:"btn-icon",children:"⏻"}),(0,c.jsx)("span",{children:"EXIT"})]}),(0,c.jsx)("button",{className:"btn-launch",onClick:()=>{(0!==m.length||confirm("No players have joined. Launch anyway?"))&&((0,d.B3)(),e.push("/host/monitor"))},children:(0,c.jsx)("span",{children:"START"})})]})]}),(0,c.jsxs)("div",{className:"host-lobby-content",children:[(0,c.jsxs)("div",{className:"host-left-panel",children:[(0,c.jsxs)("div",{className:"panel-header",children:[(0,c.jsx)("h2",{className:"panel-title",children:"WAITING FOR OTHER PLAYERS"}),(0,c.jsxs)("div",{className:"connected-count",children:[(0,c.jsx)("span",{className:"count-label",children:"QUIZ:"}),(0,c.jsx)("span",{className:"count-value",children:s.topicTitle||"General"})]}),(0,c.jsxs)("div",{className:"connected-count",children:[(0,c.jsx)("span",{className:"count-label",children:"QUESTIONS:"}),(0,c.jsx)("span",{className:"count-value",children:s.selectedQuestions||10})]}),(0,c.jsxs)("div",{className:"connected-count",children:[(0,c.jsx)("span",{className:"count-label",children:"DIFFICULTY:"}),(0,c.jsx)("span",{className:"count-value",children:(s.selectedDifficulty||"medium").toUpperCase()})]})]}),(0,c.jsxs)("div",{className:"player-grid",children:[m.map(e=>(0,c.jsxs)("div",{className:"player-card",children:[(0,c.jsx)("div",{className:"player-icon",children:e.spacecraft?(0,c.jsx)("img",{src:e.spacecraft.image,alt:e.spacecraft.name,style:{width:"40px",height:"30px",objectFit:"contain"}}):"\uD83D\uDE80"}),(0,c.jsx)("span",{className:"player-name",children:e.username})]},e.id)),Array.from({length:Math.max(0,12-m.length)}).map((e,s)=>(0,c.jsx)("div",{className:"player-card empty",children:(0,c.jsx)("span",{className:"empty-icon",children:"+"})},"empty-".concat(s)))]})]}),(0,c.jsxs)("div",{className:"host-right-panel",children:[(0,c.jsxs)("div",{className:"game-code-section",children:[(0,c.jsx)("div",{className:"game-code-display",children:(0,c.jsx)("span",{className:"game-code",children:a})}),(0,c.jsx)("div",{className:"code-actions",children:(0,c.jsx)("button",{className:"btn-code-action w-full ".concat(p?"success":""),onClick:f,children:(0,c.jsx)("span",{children:p?"COPIED!":"COPY"})})})]}),(0,c.jsx)("div",{className:"qr-section",children:(0,c.jsx)("div",{className:"qr-container",onClick:()=>j(!0),children:(0,c.jsxs)("div",{className:"qr-frame",children:[(0,c.jsx)("div",{className:"qr-corner top-left"}),(0,c.jsx)("div",{className:"qr-corner top-right"}),(0,c.jsx)("div",{className:"qr-corner bottom-left"}),(0,c.jsx)("div",{className:"qr-corner bottom-right"}),(0,c.jsx)(n.h,{value:v,size:160,bgColor:"transparent",fgColor:"#46a7bb",level:"H"})]})})})]})]}),(0,c.jsx)(o,{isOpen:x,onClose:()=>j(!1),gameCode:a,joinUrl:v})]})}}},e=>{e.O(0,[77,571,441,255,358],()=>e(e.s=1625)),_N_E=e.O()}]);
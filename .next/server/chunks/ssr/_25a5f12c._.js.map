{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/deadline-2days/space-quiz-mission%20-%20Final%20-%20Copy%20%287%29%20-%20Copy/app/join/game/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useGame } from '@/context/GameContext';\r\nimport { startMiniGame, cleanupMiniGame, GameStats } from '@/lib/miniGame';\r\n\r\nexport default function GamePage(): React.JSX.Element {\r\n    const router = useRouter();\r\n    const { gameState, setGameState, showLoading, hideLoading } = useGame();\r\n\r\n    const handleGameComplete = useCallback((stats: GameStats): void => {\r\n        setGameState(prev => ({\r\n            ...prev,\r\n            miniGamesCompleted: stats.success ? prev.miniGamesCompleted + 1 : prev.miniGamesCompleted,\r\n            score: prev.score + stats.score,\r\n            gameStats: {\r\n                hits: stats.hits,\r\n                asteroidsDestroyed: stats.asteroidsDestroyed,\r\n                gameScore: stats.score,\r\n                bossDestroyed: stats.bossDestroyed,\r\n                success: stats.success\r\n            },\r\n            isEliminated: stats.isEliminated\r\n        }));\r\n\r\n        showLoading();\r\n        setTimeout(() => {\r\n            // If player is eliminated, go directly to results\r\n            if (stats.isEliminated) {\r\n                router.push('/join/results');\r\n            } else if (gameState.currentQuestionIndex < gameState.selectedQuestions) {\r\n                router.push('/join/quiz');\r\n            } else {\r\n                router.push('/join/results');\r\n            }\r\n            hideLoading();\r\n        }, 500);\r\n    }, [gameState.currentQuestionIndex, gameState.selectedQuestions, router, setGameState, showLoading, hideLoading]);\r\n\r\n    useEffect(() => {\r\n        if (!gameState.selectedSpaceship) {\r\n            router.push('/join/hangar');\r\n            return;\r\n        }\r\n\r\n        const initTimeout = setTimeout(() => {\r\n            if (gameState.selectedSpaceship) {\r\n                startMiniGame(\r\n                    gameState.selectedSpaceship,\r\n                    gameState.selectedDifficulty,\r\n                    handleGameComplete\r\n                );\r\n            }\r\n        }, 600);\r\n\r\n        return () => {\r\n            clearTimeout(initTimeout);\r\n            cleanupMiniGame();\r\n        };\r\n    }, [gameState.selectedSpaceship, gameState.selectedDifficulty, handleGameComplete, router]);\r\n\r\n    return (\r\n        <section id=\"screen-minigame\" className=\"screen active game-fullscreen\">\r\n            <canvas id=\"minigame-canvas\"></canvas>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,IAAA,kIAAO;IAErE,MAAM,qBAAqB,IAAA,oNAAW,EAAC,CAAC;QACpC,aAAa,CAAA,OAAQ,CAAC;gBAClB,GAAG,IAAI;gBACP,oBAAoB,MAAM,OAAO,GAAG,KAAK,kBAAkB,GAAG,IAAI,KAAK,kBAAkB;gBACzF,OAAO,KAAK,KAAK,GAAG,MAAM,KAAK;gBAC/B,WAAW;oBACP,MAAM,MAAM,IAAI;oBAChB,oBAAoB,MAAM,kBAAkB;oBAC5C,WAAW,MAAM,KAAK;oBACtB,eAAe,MAAM,aAAa;oBAClC,SAAS,MAAM,OAAO;gBAC1B;gBACA,cAAc,MAAM,YAAY;YACpC,CAAC;QAED;QACA,WAAW;YACP,kDAAkD;YAClD,IAAI,MAAM,YAAY,EAAE;gBACpB,OAAO,IAAI,CAAC;YAChB,OAAO,IAAI,UAAU,oBAAoB,GAAG,UAAU,iBAAiB,EAAE;gBACrE,OAAO,IAAI,CAAC;YAChB,OAAO;gBACH,OAAO,IAAI,CAAC;YAChB;YACA;QACJ,GAAG;IACP,GAAG;QAAC,UAAU,oBAAoB;QAAE,UAAU,iBAAiB;QAAE;QAAQ;QAAc;QAAa;KAAY;IAEhH,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,UAAU,iBAAiB,EAAE;YAC9B,OAAO,IAAI,CAAC;YACZ;QACJ;QAEA,MAAM,cAAc,WAAW;YAC3B,IAAI,UAAU,iBAAiB,EAAE;gBAC7B,IAAA,gIAAa,EACT,UAAU,iBAAiB,EAC3B,UAAU,kBAAkB,EAC5B;YAER;QACJ,GAAG;QAEH,OAAO;YACH,aAAa;YACb,IAAA,kIAAe;QACnB;IACJ,GAAG;QAAC,UAAU,iBAAiB;QAAE,UAAU,kBAAkB;QAAE;QAAoB;KAAO;IAE1F,qBACI,8OAAC;QAAQ,IAAG;QAAkB,WAAU;kBACpC,cAAA,8OAAC;YAAO,IAAG;;;;;;;;;;;AAGvB","debugId":null}}]
}
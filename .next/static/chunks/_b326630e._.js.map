{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/deadline-2days/space-quiz-mission%20-%20Final%20-%20Copy%20%287%29%20-%20Copy/app/join/game/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useGame } from '@/context/GameContext';\r\nimport { startMiniGame, cleanupMiniGame, GameStats } from '@/lib/miniGame';\r\n\r\nexport default function GamePage(): React.JSX.Element {\r\n    const router = useRouter();\r\n    const { gameState, setGameState, showLoading, hideLoading } = useGame();\r\n\r\n    const handleGameComplete = useCallback((stats: GameStats): void => {\r\n        setGameState(prev => ({\r\n            ...prev,\r\n            miniGamesCompleted: stats.success ? prev.miniGamesCompleted + 1 : prev.miniGamesCompleted,\r\n            score: prev.score + stats.score,\r\n            gameStats: {\r\n                hits: stats.hits,\r\n                asteroidsDestroyed: stats.asteroidsDestroyed,\r\n                gameScore: stats.score,\r\n                bossDestroyed: stats.bossDestroyed,\r\n                success: stats.success\r\n            },\r\n            isEliminated: stats.isEliminated\r\n        }));\r\n\r\n        showLoading();\r\n        setTimeout(() => {\r\n            // If player is eliminated, go directly to results\r\n            if (stats.isEliminated) {\r\n                router.push('/join/results');\r\n            } else if (gameState.currentQuestionIndex < gameState.selectedQuestions) {\r\n                router.push('/join/quiz');\r\n            } else {\r\n                router.push('/join/results');\r\n            }\r\n            hideLoading();\r\n        }, 500);\r\n    }, [gameState.currentQuestionIndex, gameState.selectedQuestions, router, setGameState, showLoading, hideLoading]);\r\n\r\n    useEffect(() => {\r\n        if (!gameState.selectedSpaceship) {\r\n            router.push('/join/hangar');\r\n            return;\r\n        }\r\n\r\n        const initTimeout = setTimeout(() => {\r\n            if (gameState.selectedSpaceship) {\r\n                startMiniGame(\r\n                    gameState.selectedSpaceship,\r\n                    gameState.selectedDifficulty,\r\n                    handleGameComplete\r\n                );\r\n            }\r\n        }, 600);\r\n\r\n        return () => {\r\n            clearTimeout(initTimeout);\r\n            cleanupMiniGame();\r\n        };\r\n    }, [gameState.selectedSpaceship, gameState.selectedDifficulty, handleGameComplete, router]);\r\n\r\n    return (\r\n        <section id=\"screen-minigame\" className=\"screen active game-fullscreen\">\r\n            <canvas id=\"minigame-canvas\"></canvas>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACpB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,IAAA,qIAAO;IAErE,MAAM,qBAAqB,IAAA,4KAAW;oDAAC,CAAC;YACpC;4DAAa,CAAA,OAAQ,CAAC;wBAClB,GAAG,IAAI;wBACP,oBAAoB,MAAM,OAAO,GAAG,KAAK,kBAAkB,GAAG,IAAI,KAAK,kBAAkB;wBACzF,OAAO,KAAK,KAAK,GAAG,MAAM,KAAK;wBAC/B,WAAW;4BACP,MAAM,MAAM,IAAI;4BAChB,oBAAoB,MAAM,kBAAkB;4BAC5C,WAAW,MAAM,KAAK;4BACtB,eAAe,MAAM,aAAa;4BAClC,SAAS,MAAM,OAAO;wBAC1B;wBACA,cAAc,MAAM,YAAY;oBACpC,CAAC;;YAED;YACA;4DAAW;oBACP,kDAAkD;oBAClD,IAAI,MAAM,YAAY,EAAE;wBACpB,OAAO,IAAI,CAAC;oBAChB,OAAO,IAAI,UAAU,oBAAoB,GAAG,UAAU,iBAAiB,EAAE;wBACrE,OAAO,IAAI,CAAC;oBAChB,OAAO;wBACH,OAAO,IAAI,CAAC;oBAChB;oBACA;gBACJ;2DAAG;QACP;mDAAG;QAAC,UAAU,oBAAoB;QAAE,UAAU,iBAAiB;QAAE;QAAQ;QAAc;QAAa;KAAY;IAEhH,IAAA,0KAAS;8BAAC;YACN,IAAI,CAAC,UAAU,iBAAiB,EAAE;gBAC9B,OAAO,IAAI,CAAC;gBACZ;YACJ;YAEA,MAAM,cAAc;kDAAW;oBAC3B,IAAI,UAAU,iBAAiB,EAAE;wBAC7B,IAAA,mIAAa,EACT,UAAU,iBAAiB,EAC3B,UAAU,kBAAkB,EAC5B;oBAER;gBACJ;iDAAG;YAEH;sCAAO;oBACH,aAAa;oBACb,IAAA,qIAAe;gBACnB;;QACJ;6BAAG;QAAC,UAAU,iBAAiB;QAAE,UAAU,kBAAkB;QAAE;QAAoB;KAAO;IAE1F,qBACI,6LAAC;QAAQ,IAAG;QAAkB,WAAU;kBACpC,cAAA,6LAAC;YAAO,IAAG;;;;;;;;;;;AAGvB;GA5DwB;;QACL,kJAAS;QACsC,qIAAO;;;KAFjD","debugId":null}}]
}
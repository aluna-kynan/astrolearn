(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},846:(e,s,t)=>{"use strict";t.d(s,{GameProvider:()=>l,I:()=>i});var r=t(5155),a=t(2115);let n={playerName:"",selectedTopicId:null,topicTitle:"",selectedQuestions:10,selectedDifficulty:"easy",selectedSpaceship:null,currentQuestionIndex:0,score:0,correctAnswers:0,questions:[],miniGamesCompleted:0,gameStats:{hits:0,asteroidsDestroyed:0,gameScore:0,bossDestroyed:!1,success:!1},isEliminated:!1},c=(0,a.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,a.useState)(n),[i,o]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>{o(!0)},[]),u=(0,a.useCallback)(()=>{setTimeout(()=>o(!1),300)},[]),m=(0,a.useCallback)(()=>{l(n)},[]);return(0,r.jsx)(c.Provider,{value:{gameState:t,setGameState:l,isLoading:i,showLoading:d,hideLoading:u,resetGame:m},children:s})}function i(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}},5527:(e,s,t)=>{Promise.resolve().then(t.bind(t,7212))},5620:(e,s,t)=>{"use strict";t.d(s,{B3:()=>i,Ip:()=>o,PL:()=>x,PN:()=>j,S0:()=>d,Sx:()=>v,TT:()=>n,aH:()=>N,bX:()=>m,bj:()=>p,hP:()=>c,i1:()=>f,tY:()=>u,zf:()=>g});let r="cosmicquest_game_session",a="cosmicquest_session_players";function n(e,s,t,n,c,l){let i={gameCode:e,hostName:s,topicId:t,topicTitle:n,selectedQuestions:c,difficulty:l,status:"waiting",createdAt:Date.now(),startedAt:null};return localStorage.setItem(r,JSON.stringify(i)),localStorage.setItem(a,JSON.stringify([])),i}function c(){let e=localStorage.getItem(r);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function l(e){let s=c();if(!s)return null;let t={...s,...e};return localStorage.setItem(r,JSON.stringify(t)),t}function i(){return l({status:"playing",startedAt:Date.now()})}function o(){return l({status:"finished"})}function d(){localStorage.removeItem(r),localStorage.removeItem(a)}function u(e){let s=c();return s&&s.gameCode===e?s:null}function m(e,s,t){let r=u(e);if(!r)return null;let a=p(),n=a.find(e=>e.username===s);if(n)return n.spacecraft=t,h(a),n;let c={id:"player-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),username:s,spacecraft:t,progress:0,questionsAnswered:0,totalQuestions:r.selectedQuestions,score:0,isHost:!1,joinedAt:Date.now()};return a.push(c),h(a),c}function p(){let e=localStorage.getItem(a);if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}}function h(e){localStorage.setItem(a,JSON.stringify(e))}function f(e,s,t,r){let a=p(),n=a.findIndex(s=>s.id===e);-1!==n&&(a[n]={...a[n],progress:s,questionsAnswered:t,score:r},h(a))}function g(e,s){let t=p(),r=t.findIndex(s=>s.id===e);-1!==r&&(t[r].spacecraft=s,h(t))}function N(){let e=c();return null!==e&&"playing"===e.status}function x(){let e=localStorage.getItem("cosmicquest_current_player");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function j(e){localStorage.setItem("cosmicquest_current_player",JSON.stringify(e))}function v(){localStorage.removeItem("cosmicquest_current_player")}},7212:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5155),a=t(2115),n=t(63),c=t(846),l=t(5620);function i(){let e=(0,n.useRouter)(),{gameState:s}=(0,c.I)(),[t,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(300),[u,m]=(0,a.useState)(10);(0,a.useEffect)(()=>{let e=(0,l.hP)();e&&m(e.selectedQuestions);let s=setInterval(()=>{i((0,l.bj)())},1e3);return()=>clearInterval(s)},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{d(s=>s<=1?(clearInterval(e),0):s-1)},1e3);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{0===o&&p()},[o]);let p=()=>{(0,l.Ip)(),e.push("/host/leaderboard")},h=t.filter(e=>e.progress>=100).length,f="".concat(t.length,"/24");return(0,r.jsxs)("section",{className:"host-monitor-screen",children:[(0,r.jsxs)("header",{className:"monitor-header",children:[(0,r.jsx)("div",{className:"monitor-brand",children:(0,r.jsx)("h1",{className:"brand-title",children:"ASTRO LEARNING"})}),(0,r.jsxs)("div",{className:"monitor-stats-bar",children:[(0,r.jsx)("div",{className:"timer-display",children:(0,r.jsx)("span",{className:"timer-value",children:(e=>{let s=Math.floor(e/60);return"".concat(s.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(o)})}),(0,r.jsx)("button",{className:"btn-end-game",onClick:p,children:(0,r.jsx)("span",{children:"End Game"})})]})]}),(0,r.jsxs)("div",{className:"monitor-title-section",children:[(0,r.jsx)("h2",{className:"monitor-title",children:"MONITOR"}),(0,r.jsxs)("p",{className:"monitor-subtitle",children:["Real-time mission tracking â€¢ ",s.topicTitle||"Quiz"]})]}),(0,r.jsxs)("div",{className:"fleet-capacity-section",children:[(0,r.jsxs)("div",{className:"capacity-header",children:[(0,r.jsx)("span",{className:"capacity-label",children:"FLEET CAPACITY"}),(0,r.jsx)("span",{className:"capacity-value",children:f})]}),(0,r.jsx)("div",{className:"capacity-bar",children:(0,r.jsx)("div",{className:"capacity-fill",style:{width:"".concat(t.length/24*100,"%")}})}),(0,r.jsxs)("div",{className:"capacity-stats",children:[(0,r.jsxs)("span",{children:[h," pilots completed"]}),(0,r.jsxs)("span",{children:[t.length-h," in progress"]})]})]}),(0,r.jsx)("div",{className:"progress-grid",children:0===t.length?(0,r.jsx)("div",{className:"empty-state",style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem"},children:(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"No players have joined yet."})}):t.map(e=>(0,r.jsxs)("div",{className:"progress-card",children:[(0,r.jsx)("div",{className:"progress-card-header",children:(0,r.jsxs)("span",{className:"progress-indicator",children:[e.questionsAnswered,"/",u]})}),(0,r.jsxs)("div",{className:"progress-card-body",children:[e.spacecraft?(0,r.jsx)("img",{src:e.spacecraft.image,alt:e.spacecraft.name,className:"progress-spacecraft"}):(0,r.jsx)("div",{className:"progress-icon",children:"\uD83D\uDE80"}),(0,r.jsx)("span",{className:"progress-player-name",children:e.username}),(0,r.jsxs)("span",{style:{fontSize:"0.75rem",color:"var(--primary-color)"},children:["Score: ",e.score]})]}),(0,r.jsx)("div",{className:"progress-bar-container",children:(0,r.jsx)("div",{className:"progress-bar-fill ".concat(e.progress>=100?"complete":""),style:{width:"".concat(e.progress,"%")}})})]},e.id))}),(0,r.jsxs)("footer",{className:"monitor-footer",children:[(0,r.jsxs)("div",{className:"footer-item",children:[(0,r.jsx)("span",{className:"footer-dot green"}),(0,r.jsx)("span",{children:"GAME IN PROGRESS"})]}),(0,r.jsx)("div",{className:"footer-item",children:(0,r.jsxs)("span",{children:["PLAYERS: ",t.length]})}),(0,r.jsx)("div",{className:"footer-item",children:(0,r.jsxs)("span",{children:["COMPLETED: ",h]})})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=5527)),_N_E=e.O()}]);
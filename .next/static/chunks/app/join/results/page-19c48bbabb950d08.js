(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},846:(e,t,s)=>{"use strict";s.d(t,{GameProvider:()=>i,I:()=>c});var r=s(5155),a=s(2115);let n={playerName:"",selectedTopicId:null,topicTitle:"",selectedQuestions:10,selectedDifficulty:"easy",selectedSpaceship:null,currentQuestionIndex:0,score:0,correctAnswers:0,questions:[],miniGamesCompleted:0,gameStats:{hits:0,asteroidsDestroyed:0,gameScore:0,bossDestroyed:!1,success:!1},isEliminated:!1},l=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(n),[c,u]=(0,a.useState)(!1),o=(0,a.useCallback)(()=>{u(!0)},[]),d=(0,a.useCallback)(()=>{setTimeout(()=>u(!1),300)},[]),m=(0,a.useCallback)(()=>{i(n)},[]);return(0,r.jsx)(l.Provider,{value:{gameState:s,setGameState:i,isLoading:c,showLoading:o,hideLoading:d,resetGame:m},children:t})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}},3126:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(63),l=s(846),i=s(5620);function c(){var e,t;let s=(0,n.useRouter)(),{gameState:c,resetGame:u,showLoading:o,hideLoading:d}=(0,l.I)(),[m,p]=(0,a.useState)(1);(0,a.useEffect)(()=>{d()},[d]),(0,a.useEffect)(()=>{let e=(0,i.PL)();if(e){let t=[...(0,i.bj)()].sort((e,t)=>t.score-e.score).findIndex(t=>t.id===e.id)+1;p(t>0?t:1)}},[]),(0,a.useEffect)(()=>{c.playerName||s.push("/")},[c.playerName,s]);let f=(()=>{switch(c.selectedQuestions){case 5:return 20;case 10:default:return 10;case 20:return 5}})(),h=c.correctAnswers*f;return(0,r.jsx)("section",{id:"screen-results",className:"screen active",children:(0,r.jsxs)("div",{className:"results-wrapper",children:[(0,r.jsxs)("div",{className:"result-top-card",children:[(null==(e=c.selectedSpaceship)?void 0:e.image)&&(0,r.jsx)("img",{src:c.selectedSpaceship.image,alt:"Spaceship",id:"result-character-img",className:"result-spaceship-img"}),(0,r.jsxs)("div",{className:"result-top-info",children:[(0,r.jsx)("p",{className:"result-pilot-name",id:"result-name-display",children:c.playerName||"-"}),(0,r.jsx)("p",{className:"result-ship-name",id:"result-ship",children:(null==(t=c.selectedSpaceship)?void 0:t.name)||"-"})]})]}),c.isEliminated&&(0,r.jsx)("div",{className:"eliminated-banner",style:{background:"linear-gradient(135deg, #ff0044, #cc0033)",color:"#ffffff",padding:"15px 30px",borderRadius:"12px",textAlign:"center",marginBottom:"10px",boxShadow:"0 4px 20px rgba(255, 0, 68, 0.4)"},children:(0,r.jsx)("span",{style:{fontSize:"20px",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"TERELIMINASI"})}),(0,r.jsxs)("div",{className:"result-stats-row",children:[(0,r.jsxs)("div",{className:"result-stat-card rank-card",children:[(0,r.jsxs)("div",{className:"rank-display",children:[(0,r.jsx)("span",{className:"trophy-icon",children:"\uD83C\uDFC6"}),(0,r.jsx)("span",{className:"result-stat-value rank-value",children:c.isEliminated?"-":(0,r.jsxs)(r.Fragment,{children:[m,(0,r.jsx)("sup",{children:(e=>{let t=["th","st","nd","rd"],s=e%100;return t[(s-20)%10]||t[s]||t[0]})(m)})]})})]}),(0,r.jsx)("span",{className:"result-stat-label",children:c.isEliminated?"Eliminated":"Rank"})]}),(0,r.jsxs)("div",{className:"result-stat-card",children:[(0,r.jsx)("span",{className:"result-stat-value",id:"result-score",children:h}),(0,r.jsx)("span",{className:"result-stat-label",children:"Score"})]}),(0,r.jsxs)("div",{className:"result-stat-card",children:[(0,r.jsxs)("span",{className:"result-stat-value",children:[(0,r.jsx)("span",{id:"result-correct",children:c.correctAnswers}),"/",(0,r.jsx)("span",{id:"result-total",children:c.selectedQuestions})]}),(0,r.jsx)("span",{className:"result-stat-label",children:"Correct"})]})]}),(0,r.jsx)("button",{className:"btn-home",onClick:()=>{(0,i.Sx)(),localStorage.removeItem("cosmicquest_joined_game_code"),u(),o(),setTimeout(()=>{s.push("/"),d()},500)},children:(0,r.jsx)("span",{children:"HOME"})})]})})}},5620:(e,t,s)=>{"use strict";s.d(t,{B3:()=>c,Ip:()=>u,PL:()=>S,PN:()=>N,S0:()=>o,Sx:()=>j,TT:()=>n,aH:()=>g,bX:()=>m,bj:()=>p,hP:()=>l,i1:()=>h,tY:()=>d,zf:()=>x});let r="cosmicquest_game_session",a="cosmicquest_session_players";function n(e,t,s,n,l,i){let c={gameCode:e,hostName:t,topicId:s,topicTitle:n,selectedQuestions:l,difficulty:i,status:"waiting",createdAt:Date.now(),startedAt:null};return localStorage.setItem(r,JSON.stringify(c)),localStorage.setItem(a,JSON.stringify([])),c}function l(){let e=localStorage.getItem(r);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function i(e){let t=l();if(!t)return null;let s={...t,...e};return localStorage.setItem(r,JSON.stringify(s)),s}function c(){return i({status:"playing",startedAt:Date.now()})}function u(){return i({status:"finished"})}function o(){localStorage.removeItem(r),localStorage.removeItem(a)}function d(e){let t=l();return t&&t.gameCode===e?t:null}function m(e,t,s){let r=d(e);if(!r)return null;let a=p(),n=a.find(e=>e.username===t);if(n)return n.spacecraft=s,f(a),n;let l={id:"player-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),username:t,spacecraft:s,progress:0,questionsAnswered:0,totalQuestions:r.selectedQuestions,score:0,isHost:!1,joinedAt:Date.now()};return a.push(l),f(a),l}function p(){let e=localStorage.getItem(a);if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}}function f(e){localStorage.setItem(a,JSON.stringify(e))}function h(e,t,s,r){let a=p(),n=a.findIndex(t=>t.id===e);-1!==n&&(a[n]={...a[n],progress:t,questionsAnswered:s,score:r},f(a))}function x(e,t){let s=p(),r=s.findIndex(t=>t.id===e);-1!==r&&(s[r].spacecraft=t,f(s))}function g(){let e=l();return null!==e&&"playing"===e.status}function S(){let e=localStorage.getItem("cosmicquest_current_player");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}function N(e){localStorage.setItem("cosmicquest_current_player",JSON.stringify(e))}function j(){localStorage.removeItem("cosmicquest_current_player")}},6564:(e,t,s)=>{Promise.resolve().then(s.bind(s,3126))}},e=>{e.O(0,[441,255,358],()=>e(e.s=6564)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{63:(e,t,i)=>{"use strict";var a=i(7260);i.o(a,"usePathname")&&i.d(t,{usePathname:function(){return a.usePathname}}),i.o(a,"useRouter")&&i.d(t,{useRouter:function(){return a.useRouter}})},646:(e,t,i)=>{Promise.resolve().then(i.bind(i,1271))},846:(e,t,i)=>{"use strict";i.d(t,{GameProvider:()=>l,I:()=>n});var a=i(5155),o=i(2115);let s={playerName:"",selectedTopicId:null,topicTitle:"",selectedQuestions:10,selectedDifficulty:"easy",selectedSpaceship:null,currentQuestionIndex:0,score:0,correctAnswers:0,questions:[],miniGamesCompleted:0,gameStats:{hits:0,asteroidsDestroyed:0,gameScore:0,bossDestroyed:!1,success:!1}},r=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[i,l]=(0,o.useState)(s),[n,h]=(0,o.useState)(!1),d=(0,o.useCallback)(()=>{h(!0)},[]),c=(0,o.useCallback)(()=>{setTimeout(()=>h(!1),300)},[]),u=(0,o.useCallback)(()=>{l(s)},[]);return(0,a.jsx)(r.Provider,{value:{gameState:i,setGameState:l,isLoading:n,showLoading:d,hideLoading:c,resetGame:u},children:t})}function n(){let e=(0,o.useContext)(r);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}},1271:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>eW});var a=i(5155),o=i(2115),s=i(63),r=i(846),l=i(7455);let n=null,h=null,d=null,c=[],u=[],f=[],p=[],m=[],y=null,g=[],w=[],x=null,b=!1,S=null,M=!1,A=null,v=null,T=!1,P=null,C="easy",q=null,k=null,E=null,D=0,I=0,W=4,H=[],R=null,B=[],z=0,V=null,F=null,_=[],L=null,O=null,G=null,N=null,X=null,Y=null,j=null,J=0,U=0,Q=null,K=null,Z=null,$=[],ee=0,et=0,ei=0,ea=0,eo=0,es=!1,er=0,el=0,en=0,eh=0,ed=0,ec=0,eu=!1,ef=0,ep=0,em=0,ey=0,eg={easy:3,medium:5,hard:8},ew={hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:500},ex=!1,eb={},eS=null,eM=null,eA=null,ev=null,eT=null,eP=null;class eC{playSoundEffect(e){if(!this.audioContext||this.isMuted)return;let t=this.audioContext.currentTime,i=this.audioContext.createOscillator(),a=this.audioContext.createGain();switch(i.connect(a),a.connect(this.audioContext.destination),e){case"spread":i.frequency.value=400,a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.1),i.start(t),i.stop(t+.1);break;case"laser":i.frequency.setValueAtTime(800,t),i.frequency.exponentialRampToValueAtTime(200,t+.15),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.15),i.start(t),i.stop(t+.15);break;case"magnetic":i.frequency.setValueAtTime(600,t),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.08),i.start(t),i.stop(t+.08);break;case"hit":i.frequency.value=150,a.gain.setValueAtTime(.15,t),a.gain.exponentialRampToValueAtTime(.01,t+.2),i.start(t),i.stop(t+.2);break;case"explosion":i.frequency.value=80,a.gain.setValueAtTime(.2,t),a.gain.exponentialRampToValueAtTime(.01,t+.3),i.start(t),i.stop(t+.3);break;case"powerup":i.frequency.setValueAtTime(400,t),i.frequency.exponentialRampToValueAtTime(800,t+.2),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.3),i.start(t),i.stop(t+.3)}}constructor(){this.audioContext=null,this.isMuted=!1;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.log("Audio context not available")}}}let eq=new eC;function ek(){if(!b||!h||!n||!d||!A)return;let e=Date.now(),t=e-ey,i=t<5e3;(function(){if(h&&n){if(D+=W,I+=W,D>=n.height&&(D=I-n.height),I>=n.height&&(I=D-n.height),E&&E.complete)h.drawImage(E,0,Math.floor(D),n.width,n.height),h.drawImage(E,0,Math.floor(I),n.width,n.height);else{let e=h.createLinearGradient(0,0,0,n.height);e.addColorStop(0,"#0a0015"),e.addColorStop(.3,"#1a0030"),e.addColorStop(.7,"#2d0050"),e.addColorStop(1,"#150025"),h.fillStyle=e,h.fillRect(0,0,n.width,n.height)}if(n)for(let e of H)e.y+=.8*W,e.rotation+=e.rotationSpeed,e.y>n.height+50&&(e.y=-100-200*Math.random(),e.x=Math.random()*n.width,e.scale=.4+.6*Math.random());if(n)for(let e of $)e.y+=.6*W,e.rotation+=e.rotationSpeed,e.y>n.height+100&&(e.y=-150-300*Math.random(),e.x=Math.random()*n.width,e.scale=.3+.5*Math.random());if(h&&n){for(let e of(h.save(),$)){let t=null,i=80;if("station1"===e.type&&(null==Q?void 0:Q.complete)?(t=Q,i=100):"station2"===e.type&&(null==K?void 0:K.complete)?(t=K,i=70):"rock"===e.type&&(null==Z?void 0:Z.complete)&&(t=Z,i=50),t){let a=i*e.scale;h.save(),h.translate(e.x,e.y),h.rotate(e.rotation),h.globalAlpha=.8,h.drawImage(t,-a/2,-a/2,a,a),h.restore()}}h.restore()}}})(),(eb.arrowleft||eb.a)&&(ei=Math.max(d.width/2,ei-d.speed)),(eb.arrowright||eb.d)&&(ei=Math.min(n.width-d.width/2,ei+d.speed)),(eb.arrowup||eb.w)&&(ea=Math.max(d.height/2,ea-d.speed)),(eb.arrowdown||eb.s)&&(ea=Math.min(n.height-d.height/2,ea+d.speed)),d.x+=(ei-d.x)*.12,d.y+=(ea-d.y)*.12;let a=Math.max(-25,Math.min(25,3*(d.x-eo)));d.tilt+=(a-d.tilt)*.15,eo=d.x,i||es||q||(function(){if(!n)return;let e=[.25*n.width,.5*n.width,.75*n.width],t=[.1,.2,.3],i={spread:"#ff6b6b",laser:"#00d4ff",magnetic:"#9d4edd"};["magnetic","spread","laser"].forEach((a,o)=>{w.push({id:er++,x:e[o],y:-50-150*o,z:t[o],width:45,height:45,weaponType:a,color:i[a],rotation:0,laneX:0})})}(),es=!0),function(){if(h&&n&&d)for(let a=w.length-1;a>=0;a--){var e,t,i;let o=w[a];if(o.rotation+=.03,o.y+=3,55>Math.sqrt(Math.pow(d.x-o.x,2)+Math.pow(d.y-o.y,2))){q=e=o.weaponType,ex=!0,d&&(d.hp=500,d.maxHp=500,ew.playerHP=500),k=({magnetic:{type:"magnetic",fireRate:150,bulletSpeed:12,bulletWidth:10,bulletHeight:20,damage:50,color:"#9d4edd",isAutoFire:!0},spread:{type:"spread",fireRate:180,bulletSpeed:14,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},laser:{type:"laser",fireRate:50,bulletSpeed:18,bulletWidth:8,bulletHeight:35,damage:100,color:"#00d4ff",isAutoFire:!0}})[e],eI(),eq.playSoundEffect("powerup"),w.length=0;return}if(o.y>n.height+50){w.splice(a,1);continue}t=o,i={x:o.x,y:o.y,scale:1},h&&(h.save(),h.translate(i.x,i.y),h.scale(i.scale,i.scale),h.rotate(t.rotation),h.shadowBlur=20,h.shadowColor=t.color,h.fillStyle=t.color,h.beginPath(),h.moveTo(0,-22),h.lineTo(22,0),h.lineTo(0,22),h.lineTo(-22,0),h.closePath(),h.fill(),h.fillStyle="#ffffff",h.beginPath(),h.moveTo(0,-10),h.lineTo(10,0),h.lineTo(0,10),h.lineTo(-10,0),h.closePath(),h.fill(),h.restore())}}(),T&&v&&ex&&e-ef>=v.fireRate&&(function(){if(!d||!n||!v||!T)return;let e=d.x,t=d.y-d.height/2,i=v.spreadCount||3;for(let a=0;a<i;a++){let o=(a-(i-1)/2)*.15;c.push({id:en++,x:e,y:t,z:1,width:v.bulletWidth,height:v.bulletHeight,speed:v.bulletSpeed,damage:v.damage,color:v.color,type:"spread",angle:o})}if(eq.playSoundEffect("spread"),q&&k){if("laser"===k.type)c.push({id:en++,x:e,y:t,z:1,width:k.bulletWidth,height:k.bulletHeight,speed:k.bulletSpeed,damage:k.damage,color:k.color,type:"laser"}),eq.playSoundEffect("laser");else if("magnetic"===k.type){let i=eD(e,t);c.push({id:en++,x:e,y:t,z:1,width:k.bulletWidth,height:k.bulletHeight,speed:k.bulletSpeed,damage:k.damage,color:k.color,type:"magnetic",targetAsteroid:i.target||void 0}),eq.playSoundEffect("magnetic")}else if("spread"===k.type){let i=k.spreadCount||3;for(let a=0;a<i;a++){let o=(a-(i-1)/2)*.25;c.push({id:en++,x:e,y:t,z:1,width:k.bulletWidth,height:k.bulletHeight,speed:k.bulletSpeed,damage:k.damage,color:"#ffaa00",type:"spread",angle:o})}}}}(),ef=e),ed<A.totalAsteroids&&e-ep>=A.asteroidSpawnRate&&(function(e){let t,i,a;if(!n||!A)return;if(e)t=A.bossSize,i=A.bossHP,a=2;else{let{min:e,max:o}=A.asteroidSize;t=e+Math.random()*(o-e),i=A.asteroidHP,a=3+2*Math.random(),ed++}let o=50+Math.random()*(n.width-100);f.push({id:el++,x:o,y:-t,z:1,baseSize:t,speed:a,hp:i,maxHp:i,isBoss:e,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.04,hitFlash:0,laneX:0})}(!1),ep=e);let o=eg[C];if(ec<o&&e-em>=3e3&&(function(){let e,t,i,a;if(!n)return;let o=["top","top-left","top-right","left","right"],s=o[Math.floor(Math.random()*o.length)];switch(s){case"top":e=.2*n.width+Math.random()*n.width*.6,t=-50,i=(Math.random()-.5)*2,a=3+2*Math.random();break;case"top-left":e=-50,t=Math.random()*n.height*.3,i=3+2*Math.random(),a=2+1.5*Math.random();break;case"top-right":e=n.width+50,t=Math.random()*n.height*.3,i=-(3+2*Math.random()),a=2+1.5*Math.random();break;case"left":e=-50,t=.2*n.height+Math.random()*n.height*.4,i=3+2*Math.random(),a=(Math.random()-.5)*2;break;case"right":e=n.width+50,t=.2*n.height+Math.random()*n.height*.4,i=-(3+2*Math.random()),a=(Math.random()-.5)*2}p.push({id:eh++,x:e,y:t,z:.8,width:40,height:50,speed:.004,hp:50,maxHp:50,laneX:0,lastFireTime:0,speedX:i,speedY:a,direction:s}),ec++}(),em=e),e-J>=2500&&(function(){if(!n||!d)return;let e=Math.random()>.5,t=5+Math.floor(2*Math.random()),i=e?-40:n.width+40,a=e?4:-4,o=e?Math.PI/2:-Math.PI/2,s=150+250*Math.random()-(t-1)*55/2;console.log("Spawning formation: ".concat(t," enemies, direction: ").concat(e?"right":"left"));for(let r=0;r<t;r++)g.push({id:U++,x:i,y:s+55*r,width:45,height:45,hp:1,maxHp:1,rotation:o,speedX:a,speedY:0,direction:e?"left-to-right":"right-to-left"})}(),J=e),!(t>=15e3)||eu||y||(n&&(y={x:n.width/2,y:-200,width:250,height:180,speed:1,hp:1e4,maxHp:1e4,lastFireTime:0,turrets:[{offsetX:-100,offsetY:50},{offsetX:-60,offsetY:70},{offsetX:60,offsetY:70},{offsetX:100,offsetY:50}]}),eu=!0),y&&function(e){if(!y||!h||!n||!d)return;let t=.25*n.height,i=y.y>=t;if(y.y<t)y.y+=y.speed;else{let e=d.x+d.width/2;Math.abs(y.x-e)>5&&(y.x<e?y.x+=3:y.x-=3)}if(i){let e=y.y+y.height/2+80;d.y<e&&(d.y=e)}if(e-y.lastFireTime>=80){for(let e of y.turrets){var a,o;a=y.x+e.offsetX,o=y.y+e.offsetY,d&&m.push({id:en++,x:a,y:o,z:1,width:20,height:40,speed:12,damage:25,color:"#ffcc00",type:"laser",isEnemy:!0,angle:Math.PI/2,dirX:0,dirY:1})}y.lastFireTime=e}!function(){if(!y||!h)return;h.save(),h.shadowBlur=30,h.shadowColor="#ff0044",N&&N.complete?h.drawImage(N,y.x-y.width/2,y.y-y.height/2,y.width,y.height):(h.fillStyle="#663399",h.fillRect(y.x-y.width/2,y.y-y.height/2,y.width,y.height));let e=.8*y.width,t=y.x-e/2,i=y.y+y.height/2+10;h.fillStyle="rgba(0, 0, 0, 0.7)",h.fillRect(t,i,e,10);let a=y.hp/y.maxHp;h.fillStyle="#ff0000",h.fillRect(t,i,e*a,10),h.fillStyle="#ff4444",h.font="bold 14px Orbitron, sans-serif",h.textAlign="center",h.fillText("BOSS",y.x,i+25),h.restore()}()}(e),f.sort((e,t)=>e.y-t.y),function(){if(h&&n)for(let e=f.length-1;e>=0;e--){let t=f[e];t.y+=t.speed,t.rotation+=t.rotationSpeed,t.hitFlash>0&&t.hitFlash--,function(e){if(!h)return;let t=e.baseSize;if(h.save(),h.translate(e.x,e.y),h.rotate(e.rotation),P&&P.complete?(e.hitFlash>0&&(h.globalAlpha=.5+.5*Math.sin(.5*e.hitFlash),h.filter="brightness(2)"),e.isBoss?(h.shadowBlur=30,h.shadowColor="#ff4444"):(h.shadowBlur=15,h.shadowColor="rgba(255, 255, 255, 0.5)"),h.drawImage(P,-t/2,-t/2,t,t),h.filter="none",h.globalAlpha=1):(h.fillStyle=e.hitFlash>0?"#ffffff":e.isBoss?"#ff4444":"#aa6633",h.beginPath(),h.arc(0,0,t/2,0,2*Math.PI),h.fill()),e.maxHp>1){h.rotate(-e.rotation);let i=.8*t,a=-t/2-12;h.fillStyle="rgba(0, 0, 0, 0.5)",h.fillRect(-i/2,a,i,5);let o=e.hp/e.maxHp;h.fillStyle=e.isBoss?"#ff0000":"#06ffa5",h.fillRect(-i/2,a,i*o,5)}h.restore()}(t),t.y>n.height+t.baseSize&&(t.isBoss&&(ew.success=!1),f.splice(e,1))}}(),function(){if(h&&n)for(let e=g.length-1;e>=0;e--){let t=g[e];if(t.x+=t.speedX,t.y+=t.speedY,t.x<-100||t.x>n.width+100||t.y<-100||t.y>n.height+100){g.splice(e,1);continue}!function(e){if(!h)return;h.save(),h.translate(e.x,e.y),h.rotate(e.rotation),h.shadowBlur=12,h.shadowColor="#00ffff";let t=e.id%2==0?Y:j;t&&t.complete?h.drawImage(t,-e.width/2,-e.height/2,e.width,e.height):(h.fillStyle="#00aaaa",h.beginPath(),h.moveTo(0,-e.height/2),h.lineTo(e.width/2,e.height/2),h.lineTo(-e.width/2,e.height/2),h.closePath(),h.fill()),h.restore()}(t)}}(),function(e){if(h&&n&&d)for(let s=p.length-1;s>=0;s--){var t,i,a,o;let r=p[s],l=d.x-r.x,c=d.y-r.y,u=Math.sqrt(l*l+c*c);u>0&&(r.x+=l/u*2.5,r.y+=c/u*2.5),e-r.lastFireTime>1500&&(t=r,i=l,a=c,o=u,d&&0!==o&&m.push({id:en++,x:t.x,y:t.y,z:t.z,width:6,height:12,speed:8,damage:25,color:"#ff4444",type:"spread",isEnemy:!0,dirX:i/o,dirY:a/o}),r.lastFireTime=e),function(e,t){if(!h)return;let i=e.width,a=e.height;h.save(),h.translate(e.x,e.y),h.rotate(t),V&&V.complete?(h.shadowBlur=15,h.shadowColor="#ff0000",h.drawImage(V,-i/2,-a/2,i,a)):(h.shadowBlur=15,h.shadowColor="#ff0000",h.fillStyle="#cc2222",h.beginPath(),h.moveTo(0,-a/2),h.lineTo(i/3,a/3),h.lineTo(-i/3,a/3),h.closePath(),h.fill(),h.fillStyle="#222222",h.beginPath(),h.arc(0,0,i/5,0,2*Math.PI),h.fill(),h.fillStyle="rgba(255, 100, 50, 0.8)",h.beginPath(),h.moveTo(-i/5,a/3),h.lineTo(0,a/2+5*Math.random()),h.lineTo(i/5,a/3),h.closePath(),h.fill()),h.restore();let o=.8*i;h.fillStyle="rgba(0, 0, 0, 0.5)",h.fillRect(e.x-o/2,e.y-a/2-10,o,4),h.fillStyle="#ff4444",h.fillRect(e.x-o/2,e.y-a/2-10,o*(e.hp/e.maxHp),4)}(r,Math.atan2(c,l)+Math.PI/2),(r.x<-150||r.x>n.width+150||r.y<-150||r.y>n.height+150)&&p.splice(s,1)}}(e),function(){if(h&&n&&d)for(let e=m.length-1;e>=0;e--){let t=m[e];if(void 0!==t.dirX&&void 0!==t.dirY?(t.x+=t.dirX*t.speed,t.y+=t.dirY*t.speed):t.y+=t.speed,Math.sqrt(Math.pow(d.x-t.x,2)+Math.pow(d.y-t.y,2))<d.width/2){q&&(d.hp-=25,ew.playerHP=d.hp,eI(),eq.playSoundEffect("hit")),m.splice(e,1);continue}if(h.save(),h.shadowBlur=8,h.shadowColor=t.color||"#ff0000","#ffcc00"===t.color&&X&&X.complete){let e=t.width||20,i=t.height||40;void 0!==t.angle?(h.translate(t.x,t.y),h.rotate(t.angle+Math.PI/2),h.drawImage(X,-e/2,-i/2,e,i)):h.drawImage(X,t.x-e/2,t.y-i/2,e,i)}else h.fillStyle="#ff4444",h.beginPath(),h.arc(t.x,t.y,5,0,2*Math.PI),h.fill();h.restore(),(t.y>n.height+50||t.y<-50||t.x<-50||t.x>n.width+50)&&m.splice(e,1)}}(),function(){if(h&&n)for(let e=c.length-1;e>=0;e--){let t=c[e];if(t.y-=t.speed,t.z-=.02,"spread"===t.type&&void 0!==t.angle&&(t.x+=Math.sin(t.angle)*t.speed*.4),"magnetic"===t.type&&d){let e=eD(d.x,d.y).target;if(e&&300>Math.sqrt(Math.pow(e.x-d.x,2)+Math.pow(e.y-d.y,2))){let i=e.x-t.x,a=e.y-t.y,o=Math.sqrt(i*i+a*a);o>0&&(t.x+=i/o*t.speed,t.y+=a/o*t.speed,t.y+=t.speed)}}let i=!1;for(let e=f.length-1;e>=0;e--){let a=f[e],o=a.baseSize;if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<o){a.hp-=t.damage,a.hitFlash=10,ew.hits++,T&&(ew.score+=100),eI(),a.hp<=0&&(ew.asteroidsDestroyed++,a.isBoss&&(ew.bossDestroyed=!0),eE(a.x,a.y,a.isBoss?2:1),f.splice(e,1),eq.playSoundEffect("explosion")),i=!0;break}}if(!i)for(let e=p.length-1;e>=0;e--){let a=p[e],o=a.width;if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<o){a.hp-=t.damage,ew.hits++,T&&(ew.score+=150),eI(),a.hp<=0&&(eE(a.x,a.y,1.2),p.splice(e,1),eq.playSoundEffect("explosion")),i=!0;break}}if(!i)for(let e=u.length-1;e>=0;e--){let a=u[e];if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<.6*a.width){a.hp-=t.damage,ew.hits++,T&&(ew.score+=50),eI(),a.hp<=0&&(eE(a.x,a.y,.8),u.splice(e,1),eq.playSoundEffect("explosion")),i=!0;break}}if(!i)for(let e=g.length-1;e>=0;e--){let a=g[e];if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<.6*a.width){a.hp-=t.damage,ew.hits++,T&&(ew.score+=50),eI(),a.hp<=0&&(eE(a.x,a.y,.8),g.splice(e,1),eq.playSoundEffect("explosion")),i=!0;break}}if(!i&&y&&Math.sqrt(Math.pow(t.x-y.x,2)+Math.pow(t.y-y.y,2))<.4*y.width&&(y.hp-=t.damage,ew.hits++,T&&(ew.score+=500),eI(),y.hp<=0&&(eE(y.x,y.y,3),ew.bossDestroyed=!0,ew.score+=5e3,y=null,eq.playSoundEffect("explosion")),i=!0),i||t.y<-50||t.z<.05){c.splice(e,1);continue}!function(e){if(!h)return;h.save(),h.shadowBlur=20,h.shadowColor=e.color;let t=3*e.width,i=2*e.height;"magnetic"===e.type?O&&O.complete?h.drawImage(O,e.x-t/2,e.y-i/2,t,i):(h.fillStyle=e.color,h.beginPath(),h.arc(e.x,e.y,e.width/2,0,2*Math.PI),h.fill()):"laser"===e.type?G&&G.complete?h.drawImage(G,e.x-t/2,e.y-i/2,t,i):(h.fillStyle=e.color,h.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height)):L&&L.complete?h.drawImage(L,e.x-t/2,e.y-i/2,t,i):(h.fillStyle=e.color,h.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height)),h.restore()}(t)}}(),function(){if(!h||!n||!R||!R.complete)return;let e=Date.now();d&&e-z>50&&(!function(){if(!d)return;let e=(Math.random()-.5)*20,t=d.height/2+10;B.push({x:d.x+e,y:d.y+t,alpha:.6+.3*Math.random(),scale:.3+.3*Math.random(),age:0,vx:(Math.random()-.5)*.8,vy:1.5+ +Math.random()})}(),z=e),h.save();for(let e=B.length-1;e>=0;e--){let t=B[e];if(t.x+=t.vx,t.y+=t.vy,t.age++,t.alpha-=.015,t.scale+=.008,t.alpha<=0){B.splice(e,1);continue}let i=50*t.scale;h.save(),h.translate(t.x,t.y),h.globalAlpha=t.alpha,h.drawImage(R,-i/2,-i/2,i,i),h.restore()}h.restore(),B.length>100&&B.splice(0,B.length-100)}(),function(){if(h&&F&&F.complete){h.save();for(let e=_.length-1;e>=0;e--){let t=_[e];if(t.age++,t.alpha-=.03,t.scale+=.02,t.rotation+=.05,t.alpha<=0){_.splice(e,1);continue}let i=80*t.scale;h.save(),h.translate(t.x,t.y),h.rotate(t.rotation),h.globalAlpha=t.alpha,h.drawImage(F,-i/2,-i/2,i,i),h.restore()}h.restore(),_.length>50&&_.splice(0,_.length-50)}}(),h&&d&&(h.save(),d.image.complete&&(h.translate(d.x,d.y),h.rotate(d.tilt*Math.PI/180),h.shadowBlur=20,h.shadowColor=T&&v?v.color:"#00d4ff",h.drawImage(d.image,-d.width/2,-d.height/2,d.width,d.height)),h.restore()),function(){if(!h||!n)return;let e=ee,t=et;h.strokeStyle="rgba(0, 255, 200, 0.8)",h.lineWidth=2,h.beginPath(),h.arc(e,t,18,0,2*Math.PI),h.stroke(),h.fillStyle="#00ffc8",h.beginPath(),h.arc(e,t,4,0,2*Math.PI),h.fill(),h.strokeStyle="rgba(0, 255, 200, 0.6)",h.lineWidth=1,h.beginPath(),h.moveTo(e-28,t),h.lineTo(e-10,t),h.stroke(),h.beginPath(),h.moveTo(e+10,t),h.lineTo(e+28,t),h.stroke(),h.beginPath(),h.moveTo(e,t-28),h.lineTo(e,t-10),h.stroke(),h.beginPath(),h.moveTo(e,t+10),h.lineTo(e,t+28),h.stroke()}(),function(e,t){if(!h||!n||!d)return;let i=(n.width-280)/2;if(h.fillStyle="rgba(0, 0, 0, 0.6)",h.beginPath(),h.roundRect(i-35,14,350,30,8),h.fill(),q){h.font="bold 14px Orbitron, sans-serif",h.fillStyle="#46a7bb",h.textAlign="center",h.fillText("HP",i-15,34),h.fillStyle="rgba(255, 0, 0, 0.3)",h.beginPath(),h.roundRect(i,18,280,22,5),h.fill();let e=d.hp/d.maxHp,t=h.createLinearGradient(i,0,i+280,0);t.addColorStop(0,"#00ff88"),t.addColorStop(1,"#00ddff"),h.fillStyle=t,h.beginPath(),h.roundRect(i,18,280*e,22,5),h.fill(),h.font="bold 13px Orbitron, sans-serif",h.fillStyle="#ffffff",h.textAlign="center",h.fillText("".concat(d.hp,"/").concat(d.maxHp),n.width/2,34),h.font="22px Arial"}else h.font="bold 16px Orbitron, sans-serif",h.fillStyle="#00ffaa",h.textAlign="center";if(h.textAlign="right",h.font="15px Orbitron, sans-serif",h.fillStyle="#ffcc00",h.fillText("\uD83C\uDFC6 ".concat(ew.score),n.width-20,38),y){h.fillStyle="#ff4444";let e=Math.round(y.hp/y.maxHp*100);h.fillText("\uD83D\uDC79 BOSS: ".concat(e,"%"),n.width-20,60)}else if(eu)h.fillStyle="#00ff88",h.fillText("\uD83D\uDC79 BOSS DESTROYED!",n.width-20,60);else{let e=Math.max(0,Math.ceil((15e3-t)/1e3));h.fillStyle="#ffaa00",h.fillText("\uD83D\uDC79 BOSS IN: ".concat(e,"s"),n.width-20,60)}if(h.fillStyle="#ff6666",h.fillText("\uD83D\uDE80 ".concat(p.length),n.width-20,82),h.textAlign="center",h.font="bold 16px Orbitron, sans-serif",e){let e=Math.ceil((5e3-t)/1e3);h.fillStyle="#ff6b6b",h.fillText("\uD83D\uDD34 SPREAD + ⏱️ ".concat(e,"s"),n.width/2,65)}else q?(h.fillStyle="#00ffaa",h.fillText("\uD83D\uDD34 SPREAD + ".concat({spread:"\uD83D\uDD34 SPREAD",laser:"\uD83D\uDD35 LASER",magnetic:"\uD83D\uDFE3 MAGNET"}[q]," (DUAL!)"),n.width/2,65)):(h.fillStyle="#00ff88",h.fillText("\uD83D\uDD34 SPREAD | \uD83C\uDFAF CATCH POWER-UP!",n.width/2,65));h.textAlign="center",h.font="13px Space Mono, monospace",h.fillStyle="rgba(255, 255, 255, 0.6)",h.fillText("MOVE: Mouse/WASD  |  ATTACK: Click/Space",n.width/2,n.height-18)}(i,t),eu&&null===y){ew.success=!0,function(){if(b=!1,x&&(cancelAnimationFrame(x),x=null),eS&&document.removeEventListener("mousemove",eS),eA&&document.removeEventListener("keydown",eA),ev&&document.removeEventListener("keyup",ev),eT&&document.removeEventListener("mousedown",eT),eP&&document.removeEventListener("mouseup",eP),!h||!n){S&&!M&&(M=!0,S(ew));return}h.fillStyle="rgba(5, 8, 20, 0.9)",h.fillRect(0,0,n.width,n.height),h.font="bold 55px Orbitron, sans-serif",h.textAlign="center",h.textBaseline="middle",ew.success?(h.fillStyle="#06ffa5",h.fillText("VICTORY!",n.width/2,n.height/2-55)):(h.fillStyle="#ff006e",h.fillText("GAME OVER",n.width/2,n.height/2-55)),h.font="26px Space Mono, monospace",h.fillStyle="#b8c1ec",h.fillText("Score: ".concat(ew.score),n.width/2,n.height/2+15),h.fillText("Destroyed: ".concat(ew.asteroidsDestroyed),n.width/2,n.height/2+50),h.font="18px Space Mono, monospace",h.fillStyle="#00d4ff",h.fillText("Continuing...",n.width/2,n.height/2+100),setTimeout(()=>{S&&!M&&(M=!0,S(ew))},3e3)}();return}if(q){let e=function(){if(!d)return null;for(let e of g)if(Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2))<(d.width/2+e.width/2)*.6)return e;return null}();if(e){d.hp-=10,ew.playerHP=d.hp;let t=g.indexOf(e);t>-1&&(eE(e.x,e.y,.8),g.splice(t,1)),eI(),eq.playSoundEffect("hit")}(function(){if(!d||!n)return!1;for(let e=f.length-1;e>=0;e--){let t=f[e];if(t.y>-t.baseSize&&t.y<n.height+t.baseSize){let i=Math.sqrt(Math.pow(d.x-t.x,2)+Math.pow(d.y-t.y,2)),a=t.baseSize;if(i<(d.width/2+a/2)*.5)return f.splice(e,1),!0}}return!1})()&&(d.hp-=50,ew.playerHP=d.hp,eI(),eq.playSoundEffect("hit")),function(){if(!d)return!1;for(let e=p.length-1;e>=0;e--){let t=p[e];if(t.z>.85){let i=Math.sqrt(Math.pow(d.x-t.x,2)+Math.pow(d.y-t.y,2)),a=t.width*(.2+.8*t.z);if(i<(d.width/2+a/2)*.6)return p.splice(e,1),!0}}return!1}()&&(d.hp-=40,ew.playerHP=d.hp,eI(),eq.playSoundEffect("hit")),d.hp<=0&&(q=null,k=null,d.hp=0,d.maxHp=500,ew.playerHP=0,eI(),eq.playSoundEffect("hit"))}x=requestAnimationFrame(ek)}function eE(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=3+Math.floor(3*Math.random());for(let o=0;o<a;o++)_.push({x:e+(Math.random()-.5)*30*i,y:t+(Math.random()-.5)*30*i,scale:(.5+.8*Math.random())*i,alpha:1,rotation:Math.random()*Math.PI*2,age:0})}function eD(e,t){let i=null,a=1/0,o=!1;for(let s of f){let r=s.x-e,l=s.y-t,n=Math.sqrt(r*r+l*l);n<a&&(a=n,i=s,o=!1)}for(let s of p){let r=s.x-e,l=s.y-t,n=Math.sqrt(r*r+l*l);n<a&&(a=n,i=s,o=!0)}return{target:i,isRocket:o}}function eI(){let e=document.getElementById("game-score"),t=document.getElementById("player-hp-text");e&&(e.textContent=String(ew.score)),t&&d&&(t.textContent="".concat(d.hp,"/").concat(d.maxHp))}function eW(){let e=(0,s.useRouter)(),{gameState:t,setGameState:i,showLoading:H,hideLoading:eg}=(0,r.I)(),eC=(0,o.useCallback)(a=>{i(e=>({...e,miniGamesCompleted:a.success?e.miniGamesCompleted+1:e.miniGamesCompleted,score:e.score+a.score,gameStats:{hits:a.hits,asteroidsDestroyed:a.asteroidsDestroyed,gameScore:a.score,bossDestroyed:a.bossDestroyed,success:a.success}})),H(),setTimeout(()=>{t.currentQuestionIndex<t.selectedQuestions?e.push("/join/quiz"):e.push("/join/results"),eg()},500)},[t.currentQuestionIndex,t.selectedQuestions,e,i,H,eg]);return(0,o.useEffect)(()=>{if(!t.selectedSpaceship)return void e.push("/join/hangar");let i=setTimeout(()=>{t.selectedSpaceship&&function(e,t,i){if(S=i,M=!1,C=t,!(n=document.getElementById("minigame-canvas"))){console.error("Canvas not found"),i({hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0});return}if(!(h=n.getContext("2d"))){console.error("Could not get canvas context"),i({hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0});return}n.width=window.innerWidth,n.height=window.innerHeight,A=l.rU[t],T=!0,v={type:"spread",fireRate:180,bulletSpeed:14,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},q=null,k=null,es=!1,w=[],er=0,c=[],u=[],f=[],p=[],m=[],ed=0,ec=0,eu=!1,y=null,el=0,en=0,eh=0,ef=0,ep=0,em=0,ey=Date.now(),b=!0,ex=!0,eb={},ew={hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0},(P=new Image).src="/assets/meteor.png",(E=new Image).src="/assets/bgbaru10.png",D=0,I=-n.height,W=({easy:3,medium:5,hard:7})[t],(R=new Image).src="/assets/Smoke Texture.png",B=[],z=0,(V=new Image).src="/assets/roket_musuh.png",(F=new Image).src="/assets/bullet_16.png",_=[],new Image().src="/assets/roket_hal.png",(L=new Image).src="/assets/bullet_25.png",(O=new Image).src="/assets/bullet_73_5.png",(G=new Image).src="/assets/bullet_68.png",(N=new Image).src="/assets/roket_bos.png",(X=new Image).src="/assets/bullet_4_2_0.png",(Y=new Image).src="/assets/sub_7_2.png",(j=new Image).src="/assets/main_7_1_1.png",g=[],J=0,U=0,(Q=new Image).src="/assets/spaceStation_8.1.png",(K=new Image).src="/assets/spacestation_1_0.png",(Z=new Image).src="/assets/batu.png",function(e){$=[];let t=6+Math.floor(4*Math.random()),i=["station1","station2","rock"];for(let a=0;a<t;a++)$.push({x:Math.random()*e.width,y:Math.random()*e.height*2-e.height,scale:.3+.5*Math.random(),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.01,type:i[Math.floor(Math.random()*i.length)]})}(n);let a=new Image;a.src=e.image,d={x:n.width/2,y:n.height-100,width:70,height:70,speed:10,image:a,dx:0,dy:0,hp:0,maxHp:500,tilt:0},ee=n.width/2,et=n.height/2,ei=d.x,ea=d.y,eo=d.x,eI(),function(){if(!n)return;let e=(e,t)=>{if(!b||!d||!n)return;let i=n.getBoundingClientRect();ee=e-i.left,et=t-i.top,ei=Math.max(d.width/2,Math.min(n.width-d.width/2,ee)),ea=Math.max(d.height/2,Math.min(n.height-d.height/2,et))};eS=t=>{e(t.clientX,t.clientY)},document.addEventListener("mousemove",eS),eM=t=>{t.preventDefault(),t.touches.length>0&&e(t.touches[0].clientX,t.touches[0].clientY)},n.addEventListener("touchmove",eM,{passive:!1}),eA=e=>{b&&d&&(eb[e.key.toLowerCase()]=!0,(" "===e.key||"Space"===e.code)&&(ex=!0))},ev=e=>{d&&(eb[e.key.toLowerCase()]=!1,(" "===e.key||"Space"===e.code)&&(ex=!1))},document.addEventListener("keydown",eA),document.addEventListener("keyup",ev),eT=()=>{ex=!0},eP=()=>{ex=!1},document.addEventListener("mousedown",eT),document.addEventListener("mouseup",eP)}(),x=requestAnimationFrame(ek)}(t.selectedSpaceship,t.selectedDifficulty,eC)},600);return()=>{clearTimeout(i),b=!1,x&&(cancelAnimationFrame(x),x=null),eS&&document.removeEventListener("mousemove",eS),eA&&document.removeEventListener("keydown",eA),ev&&document.removeEventListener("keyup",ev),eT&&document.removeEventListener("mousedown",eT),eP&&document.removeEventListener("mouseup",eP)}},[t.selectedSpaceship,t.selectedDifficulty,eC,e]),(0,a.jsx)("section",{id:"screen-minigame",className:"screen active game-fullscreen",children:(0,a.jsx)("canvas",{id:"minigame-canvas"})})}},7455:(e,t,i)=>{"use strict";i.d(t,{rB:()=>o,rU:()=>a,wj:()=>s});let a={easy:{weapon:{type:"spread",fireRate:200,bulletSpeed:10,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},asteroidHP:1,asteroidSize:{min:25,max:35},asteroidSpeed:{min:1,max:2},asteroidSpawnRate:1500,totalAsteroids:12,hasBoss:!1,bossHP:0,bossSize:0,gameDuration:30},medium:{weapon:{type:"laser",fireRate:50,bulletSpeed:15,bulletWidth:8,bulletHeight:40,damage:100,color:"#00d4ff",isAutoFire:!0},asteroidHP:2,asteroidSize:{min:30,max:45},asteroidSpeed:{min:2,max:3.5},asteroidSpawnRate:900,totalAsteroids:20,hasBoss:!1,bossHP:0,bossSize:0,gameDuration:40},hard:{weapon:{type:"magnetic",fireRate:150,bulletSpeed:8,bulletWidth:10,bulletHeight:20,damage:50,color:"#9d4edd",isAutoFire:!0},asteroidHP:2,asteroidSize:{min:25,max:40},asteroidSpeed:{min:2.5,max:4.5},asteroidSpawnRate:500,totalAsteroids:35,hasBoss:!0,bossHP:100,bossSize:120,gameDuration:50}},o={easy:[{id:1,difficulty:"easy",question:"What is the closest planet to the Sun?",options:["Mercury","Venus","Earth","Mars"],correctAnswer:0},{id:2,difficulty:"easy",question:"How many planets are in our solar system?",options:["7","8","9","10"],correctAnswer:1},{id:3,difficulty:"easy",question:"What is the largest planet in our solar system?",options:["Saturn","Neptune","Jupiter","Uranus"],correctAnswer:2},{id:4,difficulty:"easy",question:"What is Earth's natural satellite called?",options:["The Moon","Titan","Europa","Phobos"],correctAnswer:0},{id:5,difficulty:"easy",question:"Which planet is known as the Red Planet?",options:["Venus","Mars","Jupiter","Saturn"],correctAnswer:1},{id:6,difficulty:"easy",question:"What is the name of our galaxy?",options:["Andromeda","Milky Way","Triangulum","Whirlpool"],correctAnswer:1},{id:7,difficulty:"easy",question:"What is the Sun?",options:["A planet","A moon","A star","An asteroid"],correctAnswer:2},{id:8,difficulty:"easy",question:"Which planet has rings?",options:["Mars","Venus","Saturn","Mercury"],correctAnswer:2},{id:9,difficulty:"easy",question:"How long does it take Earth to orbit the Sun?",options:["365 days","30 days","7 days","100 days"],correctAnswer:0},{id:10,difficulty:"easy",question:"What is the smallest planet in our solar system?",options:["Mars","Mercury","Venus","Pluto"],correctAnswer:1},{id:11,difficulty:"easy",question:"Which planet is closest to Earth?",options:["Mars","Venus","Mercury","Jupiter"],correctAnswer:1},{id:12,difficulty:"easy",question:"What color is the sunset on Mars?",options:["Red","Orange","Blue","Purple"],correctAnswer:2},{id:13,difficulty:"easy",question:"How many moons does Earth have?",options:["0","1","2","3"],correctAnswer:1},{id:14,difficulty:"easy",question:"What is the hottest planet in our solar system?",options:["Mercury","Venus","Mars","Jupiter"],correctAnswer:1},{id:15,difficulty:"easy",question:"What do we call a person who travels to space?",options:["Pilot","Astronaut","Captain","Navigator"],correctAnswer:1}],medium:[{id:16,difficulty:"medium",question:"What is the Great Red Spot on Jupiter?",options:["A volcano","A storm","A crater","An ocean"],correctAnswer:1},{id:17,difficulty:"medium",question:"Which planet has the most moons?",options:["Jupiter","Saturn","Uranus","Neptune"],correctAnswer:1},{id:18,difficulty:"medium",question:"What is the Kuiper Belt?",options:["A region of asteroids","A region of comets and icy bodies","A type of galaxy","A constellation"],correctAnswer:1},{id:19,difficulty:"medium",question:"How long is a day on Venus?",options:["24 hours","243 Earth days","10 hours","365 days"],correctAnswer:1},{id:20,difficulty:"medium",question:"What is the name of the first artificial satellite?",options:["Apollo 11","Sputnik 1","Voyager 1","Hubble"],correctAnswer:1},{id:21,difficulty:"medium",question:"Which planet rotates on its side?",options:["Neptune","Saturn","Uranus","Jupiter"],correctAnswer:2},{id:22,difficulty:"medium",question:"What is the asteroid belt located between?",options:["Earth and Mars","Mars and Jupiter","Jupiter and Saturn","Venus and Earth"],correctAnswer:1},{id:23,difficulty:"medium",question:"What is the speed of light?",options:["300,000 km/s","150,000 km/s","500,000 km/s","100,000 km/s"],correctAnswer:0},{id:24,difficulty:"medium",question:"Which moon of Jupiter is the largest in the solar system?",options:["Europa","Io","Ganymede","Callisto"],correctAnswer:2},{id:25,difficulty:"medium",question:"What causes the Northern Lights (Aurora Borealis)?",options:["Moonlight reflection","Solar wind particles","Meteor showers","Volcanic ash"],correctAnswer:1},{id:26,difficulty:"medium",question:"How many Earth years does it take Neptune to orbit the Sun?",options:["84 years","165 years","248 years","12 years"],correctAnswer:1},{id:27,difficulty:"medium",question:"What is a light-year?",options:["A unit of time","A unit of distance","A unit of speed","A unit of mass"],correctAnswer:1},{id:28,difficulty:"medium",question:"Which planet has the strongest winds in the solar system?",options:["Jupiter","Saturn","Neptune","Uranus"],correctAnswer:2},{id:29,difficulty:"medium",question:"What is the temperature at the core of the Sun?",options:["1 million \xb0C","15 million \xb0C","100,000 \xb0C","50 million \xb0C"],correctAnswer:1},{id:30,difficulty:"medium",question:"Which spacecraft was the first to leave our solar system?",options:["Voyager 1","Pioneer 10","New Horizons","Cassini"],correctAnswer:0}],hard:[{id:31,difficulty:"hard",question:"What is the Schwarzschild radius?",options:["The radius of a star","The event horizon of a black hole","The distance to the nearest star","The size of a galaxy"],correctAnswer:1},{id:32,difficulty:"hard",question:"What percentage of the universe is dark matter?",options:["27%","68%","5%","15%"],correctAnswer:0},{id:33,difficulty:"hard",question:"What is the Chandrasekhar limit?",options:["Maximum mass of a white dwarf","Speed of light limit","Temperature of stars","Size of galaxies"],correctAnswer:0},{id:34,difficulty:"hard",question:"What is gravitational lensing?",options:["Bending of light by gravity","Formation of galaxies","Expansion of universe","Collision of stars"],correctAnswer:0},{id:35,difficulty:"hard",question:"What is the Roche limit?",options:["Distance where tidal forces destroy objects","Maximum speed in space","Temperature of black holes","Age of universe"],correctAnswer:0},{id:36,difficulty:"hard",question:"What is redshift in astronomy?",options:["Color of Mars","Light stretched by expansion","Type of star","Solar phenomenon"],correctAnswer:1},{id:37,difficulty:"hard",question:"What is the Oort Cloud?",options:["A nebula","A theoretical cloud of comets","A type of galaxy","A constellation"],correctAnswer:1},{id:38,difficulty:"hard",question:"What is Hawking radiation?",options:["Radiation from the Sun","Theoretical radiation from black holes","Cosmic background radiation","Solar wind"],correctAnswer:1},{id:39,difficulty:"hard",question:"What is the cosmic microwave background?",options:["Radiation from stars","Afterglow of the Big Bang","Solar radiation","Galaxy emissions"],correctAnswer:1},{id:40,difficulty:"hard",question:"What is a quasar?",options:["A type of star","An extremely bright active galactic nucleus","A planet","A moon"],correctAnswer:1},{id:41,difficulty:"hard",question:"What is the Hubble constant?",options:["Age of universe","Rate of universe expansion","Speed of light","Mass of galaxies"],correctAnswer:1},{id:42,difficulty:"hard",question:"What are magnetars?",options:["Magnetic planets","Neutron stars with extreme magnetic fields","Black holes","Asteroids"],correctAnswer:1},{id:43,difficulty:"hard",question:"What is the Drake equation used for?",options:["Calculating star mass","Estimating alien civilizations","Measuring distances","Predicting eclipses"],correctAnswer:1},{id:44,difficulty:"hard",question:"What is a pulsar?",options:["A pulsating star","A rotating neutron star","A type of galaxy","A comet"],correctAnswer:1},{id:45,difficulty:"hard",question:"What is the Great Attractor?",options:["A black hole","A gravitational anomaly pulling galaxies","A supernova","A nebula"],correctAnswer:1}]},s=[{id:1,name:"Nebula Striker",description:"Fast and agile fighter craft",speed:9,color:"#0026ffff",emoji:"\uD83D\uDE80",image:"/assets/main_4_2_2.png"},{id:2,name:"Quantum UFO",description:"Advanced exploration vessel",speed:7,color:"#9d4edd",emoji:"\uD83D\uDEF8",image:"/assets/galaksi2.webp"},{id:3,name:"Stellar Phoenix",description:"Heavy combat cruiser",speed:6,color:"#ff006e",emoji:"\uD83D\uDEF0️",image:"/assets/galaksi3.webp"},{id:4,name:"Cosmic Ranger",description:"Balanced all-purpose ship",speed:8,color:"#1A5D1A",emoji:"✨",image:"/assets/galaksi4.webp"},{id:5,name:"Void Reaper",description:"Stealth reconnaissance craft",speed:10,color:"#ff9e00",emoji:"\uD83C\uDF1F",image:"/assets/galaksi5.gif"},{id:6,name:"Galaxy Titan",description:"Massive flagship carrier",speed:5,color:"#FF4646",emoji:"\uD83C\uDF20",image:"/assets/galaksi6.png"}]}},e=>{e.O(0,[441,255,358],()=>e(e.s=646)),_N_E=e.O()}]);
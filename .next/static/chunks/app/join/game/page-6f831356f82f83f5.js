(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{63:(e,t,i)=>{"use strict";var a=i(7260);i.o(a,"usePathname")&&i.d(t,{usePathname:function(){return a.usePathname}}),i.o(a,"useRouter")&&i.d(t,{useRouter:function(){return a.useRouter}})},646:(e,t,i)=>{Promise.resolve().then(i.bind(i,1271))},846:(e,t,i)=>{"use strict";i.d(t,{GameProvider:()=>r,I:()=>n});var a=i(5155),o=i(2115);let s={playerName:"",selectedTopicId:null,topicTitle:"",selectedQuestions:10,selectedDifficulty:"easy",selectedSpaceship:null,currentQuestionIndex:0,score:0,correctAnswers:0,questions:[],miniGamesCompleted:0,gameStats:{hits:0,asteroidsDestroyed:0,gameScore:0,bossDestroyed:!1,success:!1},isEliminated:!1},l=(0,o.createContext)(void 0);function r(e){let{children:t}=e,[i,r]=(0,o.useState)(s),[n,d]=(0,o.useState)(!1),h=(0,o.useCallback)(()=>{d(!0)},[]),c=(0,o.useCallback)(()=>{setTimeout(()=>d(!1),300)},[]),u=(0,o.useCallback)(()=>{r(s)},[]);return(0,a.jsx)(l.Provider,{value:{gameState:i,setGameState:r,isLoading:n,showLoading:h,hideLoading:c,resetGame:u},children:t})}function n(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e}},1271:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>eI});var a=i(5155),o=i(2115),s=i(63),l=i(846),r=i(7455);let n=null,d=null,h=null,c=[],u=[],f=[],p=[],m=null,g=[],y=null,w=!1,x=null,b=!1,A=null,M=null,S=!1,v=null,T="easy",C=null,E=null,D=0,q=null,P=0,k=0,R=4,W=[],I=null,H=[],z=0,B=null,V=null,F=[],L=null,_=null,O=null,G=null,N=null,X=null,j=null,Y=null,J=[],U=0,Q=0,K=0,Z=0,$=0,ee=!1,et=0,ei=0,ea=0,eo=0,es=0,el=0,er=!1,en=0,ed=0,eh=0,ec=0,eu=3,ef=10,ep=!1,em=0,eg={easy:12,medium:18,hard:25},ey={hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0,isEliminated:!1},ew=!1,ex={},eb=null,eA=null,eM=null,eS=null,ev=null,eT=null;class eC{playSoundEffect(e){if(!this.audioContext||this.isMuted)return;let t=this.audioContext.currentTime,i=this.audioContext.createOscillator(),a=this.audioContext.createGain();switch(i.connect(a),a.connect(this.audioContext.destination),e){case"spread":i.frequency.value=400,a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.1),i.start(t),i.stop(t+.1);break;case"laser":i.frequency.setValueAtTime(800,t),i.frequency.exponentialRampToValueAtTime(200,t+.15),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.15),i.start(t),i.stop(t+.15);break;case"magnetic":i.frequency.setValueAtTime(600,t),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.08),i.start(t),i.stop(t+.08);break;case"hit":i.frequency.value=150,a.gain.setValueAtTime(.15,t),a.gain.exponentialRampToValueAtTime(.01,t+.2),i.start(t),i.stop(t+.2);break;case"explosion":i.frequency.value=80,a.gain.setValueAtTime(.2,t),a.gain.exponentialRampToValueAtTime(.01,t+.3),i.start(t),i.stop(t+.3);break;case"powerup":i.frequency.setValueAtTime(400,t),i.frequency.exponentialRampToValueAtTime(800,t+.2),a.gain.setValueAtTime(.12,t),a.gain.exponentialRampToValueAtTime(.01,t+.3),i.start(t),i.stop(t+.3)}}constructor(){this.audioContext=null,this.isMuted=!1;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){console.log("Audio context not available")}}}let eE=new eC;function eD(){if(!w||!d||!n||!h||!A)return;let e=Date.now(),t=e-ec,i=t<5e3;(function(){if(d&&n){if(P+=R,k+=R,P>=n.height&&(P=k-n.height),k>=n.height&&(k=P-n.height),q&&q.complete)d.drawImage(q,0,Math.floor(P),n.width,n.height),d.drawImage(q,0,Math.floor(k),n.width,n.height);else{let e=d.createLinearGradient(0,0,0,n.height);e.addColorStop(0,"#0a0015"),e.addColorStop(.3,"#1a0030"),e.addColorStop(.7,"#2d0050"),e.addColorStop(1,"#150025"),d.fillStyle=e,d.fillRect(0,0,n.width,n.height)}if(n)for(let e of W)e.y+=.8*R,e.rotation+=e.rotationSpeed,e.y>n.height+50&&(e.y=-100-200*Math.random(),e.x=Math.random()*n.width,e.scale=.4+.6*Math.random());if(n)for(let e of J)e.y+=.6*R,e.rotation+=e.rotationSpeed,e.y>n.height+100&&(e.y=-150-300*Math.random(),e.x=Math.random()*n.width,e.scale=.3+.5*Math.random());if(d&&n){for(let e of(d.save(),J)){let t=null,i=80;if("station1"===e.type&&(null==X?void 0:X.complete)?(t=X,i=100):"station2"===e.type&&(null==j?void 0:j.complete)?(t=j,i=70):"rock"===e.type&&(null==Y?void 0:Y.complete)&&(t=Y,i=50),t){let a=i*e.scale;d.save(),d.translate(e.x,e.y),d.rotate(e.rotation),d.globalAlpha=.8,d.drawImage(t,-a/2,-a/2,a,a),d.restore()}}d.restore()}}})(),(ex.arrowleft||ex.a)&&(K=Math.max(h.width/2,K-h.speed)),(ex.arrowright||ex.d)&&(K=Math.min(n.width-h.width/2,K+h.speed)),(ex.arrowup||ex.w)&&(Z=Math.max(h.height/2,Z-h.speed)),(ex.arrowdown||ex.s)&&(Z=Math.min(n.height-h.height/2,Z+h.speed)),h.x+=(K-h.x)*.12,h.y+=(Z-h.y)*.12;let a=Math.max(-25,Math.min(25,3*(h.x-$)));h.tilt+=(a-h.tilt)*.15,$=h.x,i||ee||C||(function(){if(!n)return;let e=[.25*n.width,.5*n.width,.75*n.width],t=[.1,.2,.3],i={spread:"#ff6b6b",laser:"#00d4ff",magnetic:"#9d4edd"};["magnetic","spread","laser"].forEach((a,o)=>{g.push({id:et++,x:e[o],y:-50-150*o,z:t[o],width:45,height:45,weaponType:a,color:i[a],rotation:0,laneX:0})})}(),ee=!0),function(){if(d&&n&&h)for(let a=g.length-1;a>=0;a--){var e,t,i;let o=g[a];if(o.rotation+=.03,o.y+=3,55>Math.sqrt(Math.pow(h.x-o.x,2)+Math.pow(h.y-o.y,2))){C=e=o.weaponType,ew=!0,D=Date.now()+5e3,E=({magnetic:{type:"magnetic",fireRate:150,bulletSpeed:12,bulletWidth:10,bulletHeight:20,damage:50,color:"#9d4edd",isAutoFire:!0},spread:{type:"spread",fireRate:180,bulletSpeed:14,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},laser:{type:"laser",fireRate:50,bulletSpeed:18,bulletWidth:8,bulletHeight:35,damage:100,color:"#00d4ff",isAutoFire:!0}})[e],eR(),eE.playSoundEffect("powerup"),g.length=0;return}if(o.y>n.height+50){g.splice(a,1);continue}t=o,i={x:o.x,y:o.y,scale:1},d&&(d.save(),d.translate(i.x,i.y),d.scale(i.scale,i.scale),d.rotate(t.rotation),d.shadowBlur=20,d.shadowColor=t.color,d.fillStyle=t.color,d.beginPath(),d.moveTo(0,-22),d.lineTo(22,0),d.lineTo(0,22),d.lineTo(-22,0),d.closePath(),d.fill(),d.fillStyle="#ffffff",d.beginPath(),d.moveTo(0,-10),d.lineTo(10,0),d.lineTo(0,10),d.lineTo(-10,0),d.closePath(),d.fill(),d.restore())}}(),S&&M&&ew&&e-en>=M.fireRate&&(function(){if(!h||!n||!M||!S)return;let e=h.x,t=h.y-h.height/2,i=M.spreadCount||3;for(let a=0;a<i;a++){let o=(a-(i-1)/2)*.15;c.push({id:ea++,x:e,y:t,z:1,width:M.bulletWidth,height:M.bulletHeight,speed:M.bulletSpeed,damage:M.damage,color:M.color,type:"spread",angle:o})}if(eE.playSoundEffect("spread"),C&&E){if("laser"===E.type)c.push({id:ea++,x:e,y:t,z:1,width:E.bulletWidth,height:E.bulletHeight,speed:E.bulletSpeed,damage:E.damage,color:E.color,type:"laser"}),eE.playSoundEffect("laser");else if("magnetic"===E.type){let i=ek(e,t);c.push({id:ea++,x:e,y:t,z:1,width:E.bulletWidth,height:E.bulletHeight,speed:E.bulletSpeed,damage:E.damage,color:E.color,type:"magnetic",targetAsteroid:i.target||void 0}),eE.playSoundEffect("magnetic")}else if("spread"===E.type){let i=E.spreadCount||3;for(let a=0;a<i;a++){let o=(a-(i-1)/2)*.25;c.push({id:ea++,x:e,y:t,z:1,width:E.bulletWidth,height:E.bulletHeight,speed:E.bulletSpeed,damage:E.damage,color:"#ffaa00",type:"spread",angle:o})}}}}(),en=e),es<A.totalAsteroids&&e-ed>=A.asteroidSpawnRate&&(function(e){let t,i,a;if(!n||!A)return;if(e)t=A.bossSize,i=A.bossHP,a=2;else{let{min:e,max:o}=A.asteroidSize;t=e+Math.random()*(o-e),i=A.asteroidHP,a=3+2*Math.random(),es++}let o=50+Math.random()*(n.width-100);u.push({id:ei++,x:o,y:-t,z:1,baseSize:t,speed:a,hp:i,maxHp:i,isBoss:e,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.04,hitFlash:0,laneX:0})}(!1),ed=e);let o=eg[T];if(el<o&&e-eh>=600&&(function(){let e,t,i,a;if(!n)return;let o=["top","top-left","top-right","left","right"],s=o[Math.floor(Math.random()*o.length)];switch(s){case"top":e=.2*n.width+Math.random()*n.width*.6,t=-50,i=(Math.random()-.5)*2,a=3+2*Math.random();break;case"top-left":e=-50,t=Math.random()*n.height*.3,i=3+2*Math.random(),a=2+1.5*Math.random();break;case"top-right":e=n.width+50,t=Math.random()*n.height*.3,i=-(3+2*Math.random()),a=2+1.5*Math.random();break;case"left":e=-50,t=.2*n.height+Math.random()*n.height*.4,i=3+2*Math.random(),a=(Math.random()-.5)*2;break;case"right":e=n.width+50,t=.2*n.height+Math.random()*n.height*.4,i=-(3+2*Math.random()),a=(Math.random()-.5)*2}f.push({id:eo++,x:e,y:t,z:.8,width:40,height:50,speed:.004,hp:50,maxHp:50,laneX:0,lastFireTime:0,speedX:i,speedY:a,direction:s}),el++}(),eh=e),!(t>=9e3)||er||m||(n&&(m={x:n.width/2,y:-200,width:250,height:180,speed:1,hp:1e4,maxHp:1e4,lastFireTime:0,turrets:[{offsetX:-100,offsetY:50},{offsetX:-60,offsetY:70},{offsetX:60,offsetY:70},{offsetX:100,offsetY:50}]}),er=!0),m&&function(e){if(!m||!d||!n||!h)return;let t=.25*n.height,i=m.y>=t;if(m.y<t)m.y+=m.speed;else{let e=h.x+h.width/2;Math.abs(m.x-e)>5&&(m.x<e?m.x+=3:m.x-=3)}if(i){let e=m.y+m.height/2+80;h.y<e&&(h.y=e)}if(e-m.lastFireTime>=150){for(let e of m.turrets){var a,o;a=m.x+e.offsetX,o=m.y+e.offsetY,h&&p.push({id:ea++,x:a,y:o,z:1,width:20,height:40,speed:12,damage:25,color:"#ffcc00",type:"laser",isEnemy:!0,angle:Math.PI/2,dirX:0,dirY:1})}m.lastFireTime=e}!function(){if(!m||!d)return;d.save(),d.shadowBlur=30,d.shadowColor="#ff0044",G&&G.complete?d.drawImage(G,m.x-m.width/2,m.y-m.height/2,m.width,m.height):(d.fillStyle="#663399",d.fillRect(m.x-m.width/2,m.y-m.height/2,m.width,m.height));let e=.8*m.width,t=m.x-e/2,i=m.y+m.height/2+10;d.fillStyle="rgba(0, 0, 0, 0.7)",d.fillRect(t,i,e,10);let a=m.hp/m.maxHp;d.fillStyle="#ff0000",d.fillRect(t,i,e*a,10),d.fillStyle="#ff4444",d.font="bold 14px Orbitron, sans-serif",d.textAlign="center",d.fillText("BOSS",m.x,i+25),d.restore()}()}(e),u.sort((e,t)=>e.y-t.y),function(){if(d&&n)for(let e=u.length-1;e>=0;e--){let t=u[e];t.y+=t.speed,t.rotation+=t.rotationSpeed,t.hitFlash>0&&t.hitFlash--,function(e){if(!d)return;let t=e.baseSize;if(d.save(),d.translate(e.x,e.y),d.rotate(e.rotation),v&&v.complete?(e.hitFlash>0&&(d.globalAlpha=.5+.5*Math.sin(.5*e.hitFlash),d.filter="brightness(2)"),e.isBoss?(d.shadowBlur=30,d.shadowColor="#ff4444"):(d.shadowBlur=15,d.shadowColor="rgba(255, 255, 255, 0.5)"),d.drawImage(v,-t/2,-t/2,t,t),d.filter="none",d.globalAlpha=1):(d.fillStyle=e.hitFlash>0?"#ffffff":e.isBoss?"#ff4444":"#aa6633",d.beginPath(),d.arc(0,0,t/2,0,2*Math.PI),d.fill()),e.maxHp>1){d.rotate(-e.rotation);let i=.8*t,a=-t/2-12;d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(-i/2,a,i,5);let o=e.hp/e.maxHp;d.fillStyle=e.isBoss?"#ff0000":"#06ffa5",d.fillRect(-i/2,a,i*o,5)}d.restore()}(t),t.y>n.height+t.baseSize&&(t.isBoss&&(ey.success=!1),u.splice(e,1))}}(),function(e){if(d&&n&&h)for(let s=f.length-1;s>=0;s--){var t,i,a,o;let l=f[s],r=h.x-l.x,c=h.y-l.y,u=Math.sqrt(r*r+c*c);u>0&&(l.x+=r/u*2.5,l.y+=c/u*2.5),e-l.lastFireTime>1500&&(t=l,i=r,a=c,o=u,h&&0!==o&&p.push({id:ea++,x:t.x,y:t.y,z:t.z,width:6,height:12,speed:8,damage:25,color:"#ff4444",type:"spread",isEnemy:!0,dirX:i/o,dirY:a/o}),l.lastFireTime=e),function(e,t){if(!d)return;let i=e.width,a=e.height;d.save(),d.translate(e.x,e.y),d.rotate(t),B&&B.complete?(d.shadowBlur=15,d.shadowColor="#ff0000",d.drawImage(B,-i/2,-a/2,i,a)):(d.shadowBlur=15,d.shadowColor="#ff0000",d.fillStyle="#cc2222",d.beginPath(),d.moveTo(0,-a/2),d.lineTo(i/3,a/3),d.lineTo(-i/3,a/3),d.closePath(),d.fill(),d.fillStyle="#222222",d.beginPath(),d.arc(0,0,i/5,0,2*Math.PI),d.fill(),d.fillStyle="rgba(255, 100, 50, 0.8)",d.beginPath(),d.moveTo(-i/5,a/3),d.lineTo(0,a/2+5*Math.random()),d.lineTo(i/5,a/3),d.closePath(),d.fill()),d.restore();let o=.8*i;d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(e.x-o/2,e.y-a/2-10,o,4),d.fillStyle="#ff4444",d.fillRect(e.x-o/2,e.y-a/2-10,o*(e.hp/e.maxHp),4)}(l,Math.atan2(c,r)+Math.PI/2),(l.x<-150||l.x>n.width+150||l.y<-150||l.y>n.height+150)&&f.splice(s,1)}}(e),function(){if(d&&n&&h)for(let e=p.length-1;e>=0;e--){let t=p[e];if(void 0!==t.dirX&&void 0!==t.dirY?(t.x+=t.dirX*t.speed,t.y+=t.dirY*t.speed):t.y+=t.speed,Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2))<h.width/2){eq(1),p.splice(e,1);continue}if(d.save(),d.shadowBlur=8,d.shadowColor=t.color||"#ff0000","#ffcc00"===t.color&&N&&N.complete){let e=t.width||20,i=t.height||40;void 0!==t.angle?(d.translate(t.x,t.y),d.rotate(t.angle+Math.PI/2),d.drawImage(N,-e/2,-i/2,e,i)):d.drawImage(N,t.x-e/2,t.y-i/2,e,i)}else d.fillStyle="#ff4444",d.beginPath(),d.arc(t.x,t.y,5,0,2*Math.PI),d.fill();d.restore(),(t.y>n.height+50||t.y<-50||t.x<-50||t.x>n.width+50)&&p.splice(e,1)}}(),function(){if(d&&n)for(let e=c.length-1;e>=0;e--){let t=c[e];if(t.y-=t.speed,t.z-=.02,"spread"===t.type&&void 0!==t.angle&&(t.x+=Math.sin(t.angle)*t.speed*.4),"magnetic"===t.type&&h){let e=ek(h.x,h.y).target;if(e&&300>Math.sqrt(Math.pow(e.x-h.x,2)+Math.pow(e.y-h.y,2))){let i=e.x-t.x,a=e.y-t.y,o=Math.sqrt(i*i+a*a);o>0&&(t.x+=i/o*t.speed,t.y+=a/o*t.speed,t.y+=t.speed)}}let i=!1;for(let e=u.length-1;e>=0;e--){let a=u[e],o=a.baseSize;if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<o){a.hp-=t.damage,a.hitFlash=10,ey.hits++,S&&(ey.score+=100),eR(),a.hp<=0&&(ey.asteroidsDestroyed++,a.isBoss&&(ey.bossDestroyed=!0),eP(a.x,a.y,a.isBoss?2:1),u.splice(e,1),eE.playSoundEffect("explosion")),i=!0;break}}if(!i)for(let e=f.length-1;e>=0;e--){let a=f[e],o=a.width;if(Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))<o){a.hp-=t.damage,ey.hits++,S&&(ey.score+=150),eR(),a.hp<=0&&(eP(a.x,a.y,1.2),f.splice(e,1),eE.playSoundEffect("explosion")),i=!0;break}}if(!i&&m&&Math.sqrt(Math.pow(t.x-m.x,2)+Math.pow(t.y-m.y,2))<.4*m.width&&(m.hp-=t.damage,ey.hits++,S&&(ey.score+=500),eR(),m.hp<=0&&(eP(m.x,m.y,3),ey.bossDestroyed=!0,ey.score+=5e3,m=null,eE.playSoundEffect("explosion")),i=!0),i||t.y<-50||t.z<.05){c.splice(e,1);continue}!function(e){if(!d)return;d.save(),d.shadowBlur=20,d.shadowColor=e.color;let t=3*e.width,i=2*e.height;"magnetic"===e.type?_&&_.complete?d.drawImage(_,e.x-t/2,e.y-i/2,t,i):(d.fillStyle=e.color,d.beginPath(),d.arc(e.x,e.y,e.width/2,0,2*Math.PI),d.fill()):"laser"===e.type?O&&O.complete?d.drawImage(O,e.x-t/2,e.y-i/2,t,i):(d.fillStyle=e.color,d.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height)):L&&L.complete?d.drawImage(L,e.x-t/2,e.y-i/2,t,i):(d.fillStyle=e.color,d.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height)),d.restore()}(t)}}(),function(){if(!d||!n||!I||!I.complete)return;let e=Date.now();h&&e-z>100&&(!function(){if(!h)return;let e=(Math.random()-.5)*20,t=h.height/2+10;H.push({x:h.x+e,y:h.y+t,alpha:.6+.3*Math.random(),scale:.3+.3*Math.random(),age:0,vx:(Math.random()-.5)*.8,vy:1.5+ +Math.random()})}(),z=e),d.save();for(let e=H.length-1;e>=0;e--){let t=H[e];if(t.x+=t.vx,t.y+=t.vy,t.age++,t.alpha-=.015,t.scale+=.008,t.alpha<=0){H.splice(e,1);continue}let i=50*t.scale;d.save(),d.translate(t.x,t.y),d.globalAlpha=t.alpha,d.drawImage(I,-i/2,-i/2,i,i),d.restore()}d.restore(),H.length>100&&H.splice(0,H.length-100)}(),function(){if(d&&V&&V.complete){d.save();for(let e=F.length-1;e>=0;e--){let t=F[e];if(t.age++,t.alpha-=.03,t.scale+=.02,t.rotation+=.05,t.alpha<=0){F.splice(e,1);continue}let i=80*t.scale;d.save(),d.translate(t.x,t.y),d.rotate(t.rotation),d.globalAlpha=t.alpha,d.drawImage(V,-i/2,-i/2,i,i),d.restore()}d.restore(),F.length>50&&F.splice(0,F.length-50)}}(),d&&h&&(d.save(),ep&&(0==Math.floor(Date.now()/100)%2&&(d.globalAlpha=.4),d.shadowBlur=30,d.shadowColor="#00ffff"),h.image.complete&&(d.translate(h.x,h.y),d.rotate(h.tilt*Math.PI/180),ep||(d.shadowBlur=20,d.shadowColor=S&&M?M.color:"#00d4ff"),d.drawImage(h.image,-h.width/2,-h.height/2,h.width,h.height)),d.restore()),function(){if(!d||!n)return;let e=U,t=Q;d.strokeStyle="rgba(0, 255, 200, 0.8)",d.lineWidth=2,d.beginPath(),d.arc(e,t,18,0,2*Math.PI),d.stroke(),d.fillStyle="#00ffc8",d.beginPath(),d.arc(e,t,4,0,2*Math.PI),d.fill(),d.strokeStyle="rgba(0, 255, 200, 0.6)",d.lineWidth=1,d.beginPath(),d.moveTo(e-28,t),d.lineTo(e-10,t),d.stroke(),d.beginPath(),d.moveTo(e+10,t),d.lineTo(e+28,t),d.stroke(),d.beginPath(),d.moveTo(e,t-28),d.lineTo(e,t-10),d.stroke(),d.beginPath(),d.moveTo(e,t+10),d.lineTo(e,t+28),d.stroke()}(),function(e,t){if(!d||!n||!h)return;let i=n.width<768,a=i?.7:1,o=200*a,s=18*a,l=(n.width-o)/2,r=12*a;d.fillStyle="rgba(0, 0, 0, 0.6)",d.beginPath(),d.roundRect(l-80*a,r-4*a,o+160*a,s+12*a,8),d.fill(),d.font="".concat(Math.floor(16*a),"px Arial"),d.textAlign="left";let c=22*a;for(let e=0;e<3;e++)e<eu?(d.fillStyle="#ff4466",d.fillText("❤️",l-70*a+e*c,r+14*a)):(d.fillStyle="rgba(255, 68, 102, 0.3)",d.fillText("\uD83D\uDDA4",l-70*a+e*c,r+14*a));d.fillStyle="rgba(255, 0, 0, 0.3)",d.beginPath(),d.roundRect(l,r,o,s,5),d.fill();let u=ef/10,p=d.createLinearGradient(l,0,l+o,0);if(p.addColorStop(0,"#ff4466"),p.addColorStop(1,"#ffaa00"),d.fillStyle=p,d.beginPath(),d.roundRect(l,r,o*u,s,5),d.fill(),d.font="bold ".concat(Math.floor(10*a),"px Orbitron, sans-serif"),d.fillStyle="#ffffff",d.textAlign="center",d.fillText("".concat(ef,"/").concat(10),n.width/2,r+12*a),ep){let e=Math.max(0,(em-Date.now())/1e3);d.font="bold ".concat(Math.floor(12*a),"px Orbitron, sans-serif"),d.fillStyle="#00ffff",d.textAlign="right",d.fillText("\uD83D\uDEE1️ ".concat(e.toFixed(1),"s"),l+o+70*a,r+12*a)}if(C){let e=Math.max(0,D-Date.now());d.font="bold ".concat(Math.floor(10*a),"px Orbitron, sans-serif"),d.fillStyle="#00ddff",d.textAlign="center",d.fillText("⚡ ".concat((e/1e3).toFixed(1),"s"),n.width/2,r+30*a)}let g=n.width-15*a;if(d.textAlign="right",d.font="".concat(Math.floor(13*a),"px Orbitron, sans-serif"),d.fillStyle="#ffcc00",d.fillText("\uD83C\uDFC6 ".concat(ey.score),g,32*a),m){d.fillStyle="#ff4444";let e=Math.round(m.hp/m.maxHp*100);d.fillText("\uD83D\uDC79 ".concat(e,"%"),g,50*a)}else if(er)d.fillStyle="#00ff88",d.fillText("\uD83D\uDC79 ✓",g,50*a);else{let e=Math.max(0,Math.ceil((9e3-t)/1e3));d.fillStyle="#ffaa00",d.fillText("\uD83D\uDC79 ".concat(e,"s"),g,50*a)}d.fillStyle="#ff6666",d.fillText("\uD83D\uDE80 ".concat(f.length),g,68*a),d.textAlign="center",d.font="bold ".concat(Math.floor(16*a),"px Orbitron, sans-serif");let y=i?50:65;if(e){let e=Math.ceil((5e3-t)/1e3);d.fillStyle="#ff6b6b",d.fillText("\uD83D\uDD34 SPREAD + ⏱️ ".concat(e,"s"),n.width/2,y)}else if(C){let e={spread:"\uD83D\uDD34 SPREAD",laser:"\uD83D\uDD35 LASER",magnetic:"\uD83D\uDFE3 MAGNET"};d.fillStyle="#00ffaa",d.fillText(i?"".concat(e[C]," DUAL!"):"\uD83D\uDD34 SPREAD + ".concat(e[C]," (DUAL!)"),n.width/2,y)}else d.fillStyle="#00ff88",d.fillText(i?"\uD83C\uDFAF CATCH POWER-UP!":"\uD83D\uDD34 SPREAD | \uD83C\uDFAF CATCH POWER-UP!",n.width/2,y);d.textAlign="center",d.font="".concat(Math.floor(11*a),"px Space Mono, monospace"),d.fillStyle="rgba(255, 255, 255, 0.6)",d.fillText(i?"\uD83D\uDC46 TAP & DRAG TO MOVE":"MOVE: Mouse/WASD  |  ATTACK: Auto-fire",n.width/2,n.height-12*a)}(i,t),er&&null===m){ey.success=!0,eW();return}if(eu<=0){ey.success=!1,ey.isEliminated=!0,eW();return}ep&&Date.now()>em&&(ep=!1),C&&Date.now()>D&&(C=null,E=null,eR(),eE.playSoundEffect("powerup")),!ep&&(function(){if(!h||!n)return!1;for(let e=u.length-1;e>=0;e--){let t=u[e];if(t.y>-t.baseSize&&t.y<n.height+t.baseSize){let i=Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2)),a=t.baseSize;if(i<(h.width/2+a/2)*.5)return u.splice(e,1),!0}}return!1}()&&eq(3),function(){if(!h)return!1;for(let e=f.length-1;e>=0;e--){let t=f[e];if(t.z>.85){let i=Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2)),a=t.width*(.2+.8*t.z);if(i<(h.width/2+a/2)*.6)return f.splice(e,1),!0}}return!1}()&&eq(2)),y=requestAnimationFrame(eD)}function eq(e){ep||(ef-=e,eE.playSoundEffect("hit"),ef<=0&&(--eu>0?(ef=10,ep=!0,em=Date.now()+3e3,eE.playSoundEffect("explosion")):ef=0),eR())}function eP(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=3+Math.floor(3*Math.random());for(let o=0;o<a;o++)F.push({x:e+(Math.random()-.5)*30*i,y:t+(Math.random()-.5)*30*i,scale:(.5+.8*Math.random())*i,alpha:1,rotation:Math.random()*Math.PI*2,age:0})}function ek(e,t){let i=null,a=1/0,o=!1;for(let s of u){let l=s.x-e,r=s.y-t,n=Math.sqrt(l*l+r*r);n<a&&(a=n,i=s,o=!1)}for(let s of f){let l=s.x-e,r=s.y-t,n=Math.sqrt(l*l+r*r);n<a&&(a=n,i=s,o=!0)}return{target:i,isRocket:o}}function eR(){let e=document.getElementById("game-score"),t=document.getElementById("player-hp-text");e&&(e.textContent=String(ey.score)),t&&h&&(t.textContent="".concat(h.hp,"/").concat(h.maxHp))}function eW(){if(w=!1,y&&(cancelAnimationFrame(y),y=null),eb&&document.removeEventListener("mousemove",eb),eM&&document.removeEventListener("keydown",eM),eS&&document.removeEventListener("keyup",eS),ev&&document.removeEventListener("mousedown",ev),eT&&document.removeEventListener("mouseup",eT),!d||!n){x&&!b&&(b=!0,x(ey));return}d.fillStyle="rgba(5, 8, 20, 0.9)",d.fillRect(0,0,n.width,n.height),d.font="bold 55px Orbitron, sans-serif",d.textAlign="center",d.textBaseline="middle",ey.success?(d.fillStyle="#06ffa5",d.fillText("VICTORY!",n.width/2,n.height/2-55)):(d.fillStyle="#ff006e",d.fillText("GAME OVER",n.width/2,n.height/2-55)),d.font="26px Space Mono, monospace",d.fillStyle="#b8c1ec",d.fillText("Score: ".concat(ey.score),n.width/2,n.height/2+15),d.fillText("Destroyed: ".concat(ey.asteroidsDestroyed),n.width/2,n.height/2+50),d.font="18px Space Mono, monospace",d.fillStyle="#00d4ff",d.fillText("Continuing...",n.width/2,n.height/2+100),setTimeout(()=>{x&&!b&&(b=!0,x(ey))},3e3)}function eI(){let e=(0,s.useRouter)(),{gameState:t,setGameState:i,showLoading:W,hideLoading:eg}=(0,l.I)(),eC=(0,o.useCallback)(a=>{i(e=>({...e,miniGamesCompleted:a.success?e.miniGamesCompleted+1:e.miniGamesCompleted,score:e.score+a.score,gameStats:{hits:a.hits,asteroidsDestroyed:a.asteroidsDestroyed,gameScore:a.score,bossDestroyed:a.bossDestroyed,success:a.success},isEliminated:a.isEliminated})),W(),setTimeout(()=>{a.isEliminated?e.push("/join/results"):t.currentQuestionIndex<t.selectedQuestions?e.push("/join/quiz"):e.push("/join/results"),eg()},500)},[t.currentQuestionIndex,t.selectedQuestions,e,i,W,eg]);return(0,o.useEffect)(()=>{if(!t.selectedSpaceship)return void e.push("/join/hangar");let i=setTimeout(()=>{t.selectedSpaceship&&function(e,t,i){if(x=i,b=!1,T=t,!(n=document.getElementById("minigame-canvas"))){console.error("Canvas not found"),i({hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0,isEliminated:!1});return}if(!(d=n.getContext("2d"))){console.error("Could not get canvas context"),i({hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0,isEliminated:!1});return}n.width=window.innerWidth,n.height=window.innerHeight,A=r.rU[t],S=!0,M={type:"spread",fireRate:180,bulletSpeed:14,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},C=null,E=null,D=0,ee=!1,g=[],et=0,c=[],u=[],f=[],p=[],es=0,el=0,er=!1,m=null,ei=0,ea=0,eo=0,en=0,ed=0,eh=0,ec=Date.now(),w=!0,ew=!0,eu=3,ef=10,ep=!1,em=0,ex={},ey={hits:0,asteroidsDestroyed:0,bossDestroyed:!1,score:0,success:!1,playerHP:0,isEliminated:!1},(v=new Image).src="/assets/meteor.png",(q=new Image).src="/assets/bgbaru10.png",P=0,k=-n.height,R=({easy:3,medium:5,hard:7})[t],(I=new Image).src="/assets/Smoke Texture.png",H=[],z=0,(B=new Image).src="/assets/roket_musuh.png",(V=new Image).src="/assets/bullet_16.png",F=[],(L=new Image).src="/assets/bullet_25.png",(_=new Image).src="/assets/bullet_73_5.png",(O=new Image).src="/assets/bullet_68.png",(G=new Image).src="/assets/roket_bos.png",(N=new Image).src="/assets/bullet_4_2_0.png",(X=new Image).src="/assets/spaceStation_8.1.png",(j=new Image).src="/assets/spacestation_1_0.png",(Y=new Image).src="/assets/batu.png",function(e){J=[];let t=6+Math.floor(4*Math.random()),i=["station1","station2","rock"];for(let a=0;a<t;a++)J.push({x:Math.random()*e.width,y:Math.random()*e.height*2-e.height,scale:.3+.5*Math.random(),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.01,type:i[Math.floor(Math.random()*i.length)]})}(n);let a=new Image;a.src=e.image,h={x:n.width/2,y:n.height-100,width:70,height:70,speed:10,image:a,dx:0,dy:0,hp:0,maxHp:0,tilt:0},U=n.width/2,Q=n.height/2,K=h.x,Z=h.y,$=h.x,eR(),function(){if(!n)return;let e=(e,t)=>{if(!w||!h||!n)return;let i=n.getBoundingClientRect();U=e-i.left,Q=t-i.top,K=Math.max(h.width/2,Math.min(n.width-h.width/2,U)),Z=Math.max(h.height/2,Math.min(n.height-h.height/2,Q))};eb=t=>{e(t.clientX,t.clientY)},document.addEventListener("mousemove",eb),eA=t=>{t.preventDefault(),t.touches.length>0&&e(t.touches[0].clientX,t.touches[0].clientY)},n.addEventListener("touchmove",eA,{passive:!1}),eM=e=>{w&&h&&(ex[e.key.toLowerCase()]=!0,(" "===e.key||"Space"===e.code)&&(ew=!0))},eS=e=>{h&&(ex[e.key.toLowerCase()]=!1,(" "===e.key||"Space"===e.code)&&(ew=!1))},document.addEventListener("keydown",eM),document.addEventListener("keyup",eS),ev=()=>{ew=!0},eT=()=>{ew=!1},document.addEventListener("mousedown",ev),document.addEventListener("mouseup",eT),n.addEventListener("touchstart",e=>{if(n&&(e.preventDefault(),ew=!0,e.touches.length>0)){let t=n.getBoundingClientRect();U=e.touches[0].clientX-t.left,Q=e.touches[0].clientY-t.top,h&&n&&(K=Math.max(h.width/2,Math.min(n.width-h.width/2,U)),Z=Math.max(h.height/2,Math.min(n.height-h.height/2,Q)))}},{passive:!1}),n.addEventListener("touchend",()=>{},{passive:!1})}(),y=requestAnimationFrame(eD)}(t.selectedSpaceship,t.selectedDifficulty,eC)},600);return()=>{clearTimeout(i),w=!1,y&&(cancelAnimationFrame(y),y=null),eb&&document.removeEventListener("mousemove",eb),eM&&document.removeEventListener("keydown",eM),eS&&document.removeEventListener("keyup",eS),ev&&document.removeEventListener("mousedown",ev),eT&&document.removeEventListener("mouseup",eT)}},[t.selectedSpaceship,t.selectedDifficulty,eC,e]),(0,a.jsx)("section",{id:"screen-minigame",className:"screen active game-fullscreen",children:(0,a.jsx)("canvas",{id:"minigame-canvas"})})}},7455:(e,t,i)=>{"use strict";i.d(t,{rB:()=>o,rU:()=>a,wj:()=>s});let a={easy:{weapon:{type:"spread",fireRate:200,bulletSpeed:10,bulletWidth:6,bulletHeight:15,damage:80,color:"#ff6b6b",spreadCount:3,isAutoFire:!0},asteroidHP:1,asteroidSize:{min:25,max:35},asteroidSpeed:{min:1,max:2},asteroidSpawnRate:1500,totalAsteroids:12,hasBoss:!1,bossHP:0,bossSize:0,gameDuration:30},medium:{weapon:{type:"laser",fireRate:50,bulletSpeed:15,bulletWidth:8,bulletHeight:40,damage:100,color:"#00d4ff",isAutoFire:!0},asteroidHP:2,asteroidSize:{min:30,max:45},asteroidSpeed:{min:2,max:3.5},asteroidSpawnRate:900,totalAsteroids:20,hasBoss:!1,bossHP:0,bossSize:0,gameDuration:40},hard:{weapon:{type:"magnetic",fireRate:150,bulletSpeed:8,bulletWidth:10,bulletHeight:20,damage:50,color:"#9d4edd",isAutoFire:!0},asteroidHP:2,asteroidSize:{min:25,max:40},asteroidSpeed:{min:2.5,max:4.5},asteroidSpawnRate:500,totalAsteroids:35,hasBoss:!0,bossHP:100,bossSize:120,gameDuration:50}},o={easy:[{id:1,difficulty:"easy",question:"What is the closest planet to the Sun?",options:["Mercury","Venus","Earth","Mars"],correctAnswer:0},{id:2,difficulty:"easy",question:"How many planets are in our solar system?",options:["7","8","9","10"],correctAnswer:1},{id:3,difficulty:"easy",question:"What is the largest planet in our solar system?",options:["Saturn","Neptune","Jupiter","Uranus"],correctAnswer:2},{id:4,difficulty:"easy",question:"What is Earth's natural satellite called?",options:["The Moon","Titan","Europa","Phobos"],correctAnswer:0},{id:5,difficulty:"easy",question:"Which planet is known as the Red Planet?",options:["Venus","Mars","Jupiter","Saturn"],correctAnswer:1},{id:6,difficulty:"easy",question:"What is the name of our galaxy?",options:["Andromeda","Milky Way","Triangulum","Whirlpool"],correctAnswer:1},{id:7,difficulty:"easy",question:"What is the Sun?",options:["A planet","A moon","A star","An asteroid"],correctAnswer:2},{id:8,difficulty:"easy",question:"Which planet has rings?",options:["Mars","Venus","Saturn","Mercury"],correctAnswer:2},{id:9,difficulty:"easy",question:"How long does it take Earth to orbit the Sun?",options:["365 days","30 days","7 days","100 days"],correctAnswer:0},{id:10,difficulty:"easy",question:"What is the smallest planet in our solar system?",options:["Mars","Mercury","Venus","Pluto"],correctAnswer:1},{id:11,difficulty:"easy",question:"Which planet is closest to Earth?",options:["Mars","Venus","Mercury","Jupiter"],correctAnswer:1},{id:12,difficulty:"easy",question:"What color is the sunset on Mars?",options:["Red","Orange","Blue","Purple"],correctAnswer:2},{id:13,difficulty:"easy",question:"How many moons does Earth have?",options:["0","1","2","3"],correctAnswer:1},{id:14,difficulty:"easy",question:"What is the hottest planet in our solar system?",options:["Mercury","Venus","Mars","Jupiter"],correctAnswer:1},{id:15,difficulty:"easy",question:"What do we call a person who travels to space?",options:["Pilot","Astronaut","Captain","Navigator"],correctAnswer:1}],medium:[{id:16,difficulty:"medium",question:"What is the Great Red Spot on Jupiter?",options:["A volcano","A storm","A crater","An ocean"],correctAnswer:1},{id:17,difficulty:"medium",question:"Which planet has the most moons?",options:["Jupiter","Saturn","Uranus","Neptune"],correctAnswer:1},{id:18,difficulty:"medium",question:"What is the Kuiper Belt?",options:["A region of asteroids","A region of comets and icy bodies","A type of galaxy","A constellation"],correctAnswer:1},{id:19,difficulty:"medium",question:"How long is a day on Venus?",options:["24 hours","243 Earth days","10 hours","365 days"],correctAnswer:1},{id:20,difficulty:"medium",question:"What is the name of the first artificial satellite?",options:["Apollo 11","Sputnik 1","Voyager 1","Hubble"],correctAnswer:1},{id:21,difficulty:"medium",question:"Which planet rotates on its side?",options:["Neptune","Saturn","Uranus","Jupiter"],correctAnswer:2},{id:22,difficulty:"medium",question:"What is the asteroid belt located between?",options:["Earth and Mars","Mars and Jupiter","Jupiter and Saturn","Venus and Earth"],correctAnswer:1},{id:23,difficulty:"medium",question:"What is the speed of light?",options:["300,000 km/s","150,000 km/s","500,000 km/s","100,000 km/s"],correctAnswer:0},{id:24,difficulty:"medium",question:"Which moon of Jupiter is the largest in the solar system?",options:["Europa","Io","Ganymede","Callisto"],correctAnswer:2},{id:25,difficulty:"medium",question:"What causes the Northern Lights (Aurora Borealis)?",options:["Moonlight reflection","Solar wind particles","Meteor showers","Volcanic ash"],correctAnswer:1},{id:26,difficulty:"medium",question:"How many Earth years does it take Neptune to orbit the Sun?",options:["84 years","165 years","248 years","12 years"],correctAnswer:1},{id:27,difficulty:"medium",question:"What is a light-year?",options:["A unit of time","A unit of distance","A unit of speed","A unit of mass"],correctAnswer:1},{id:28,difficulty:"medium",question:"Which planet has the strongest winds in the solar system?",options:["Jupiter","Saturn","Neptune","Uranus"],correctAnswer:2},{id:29,difficulty:"medium",question:"What is the temperature at the core of the Sun?",options:["1 million \xb0C","15 million \xb0C","100,000 \xb0C","50 million \xb0C"],correctAnswer:1},{id:30,difficulty:"medium",question:"Which spacecraft was the first to leave our solar system?",options:["Voyager 1","Pioneer 10","New Horizons","Cassini"],correctAnswer:0}],hard:[{id:31,difficulty:"hard",question:"What is the Schwarzschild radius?",options:["The radius of a star","The event horizon of a black hole","The distance to the nearest star","The size of a galaxy"],correctAnswer:1},{id:32,difficulty:"hard",question:"What percentage of the universe is dark matter?",options:["27%","68%","5%","15%"],correctAnswer:0},{id:33,difficulty:"hard",question:"What is the Chandrasekhar limit?",options:["Maximum mass of a white dwarf","Speed of light limit","Temperature of stars","Size of galaxies"],correctAnswer:0},{id:34,difficulty:"hard",question:"What is gravitational lensing?",options:["Bending of light by gravity","Formation of galaxies","Expansion of universe","Collision of stars"],correctAnswer:0},{id:35,difficulty:"hard",question:"What is the Roche limit?",options:["Distance where tidal forces destroy objects","Maximum speed in space","Temperature of black holes","Age of universe"],correctAnswer:0},{id:36,difficulty:"hard",question:"What is redshift in astronomy?",options:["Color of Mars","Light stretched by expansion","Type of star","Solar phenomenon"],correctAnswer:1},{id:37,difficulty:"hard",question:"What is the Oort Cloud?",options:["A nebula","A theoretical cloud of comets","A type of galaxy","A constellation"],correctAnswer:1},{id:38,difficulty:"hard",question:"What is Hawking radiation?",options:["Radiation from the Sun","Theoretical radiation from black holes","Cosmic background radiation","Solar wind"],correctAnswer:1},{id:39,difficulty:"hard",question:"What is the cosmic microwave background?",options:["Radiation from stars","Afterglow of the Big Bang","Solar radiation","Galaxy emissions"],correctAnswer:1},{id:40,difficulty:"hard",question:"What is a quasar?",options:["A type of star","An extremely bright active galactic nucleus","A planet","A moon"],correctAnswer:1},{id:41,difficulty:"hard",question:"What is the Hubble constant?",options:["Age of universe","Rate of universe expansion","Speed of light","Mass of galaxies"],correctAnswer:1},{id:42,difficulty:"hard",question:"What are magnetars?",options:["Magnetic planets","Neutron stars with extreme magnetic fields","Black holes","Asteroids"],correctAnswer:1},{id:43,difficulty:"hard",question:"What is the Drake equation used for?",options:["Calculating star mass","Estimating alien civilizations","Measuring distances","Predicting eclipses"],correctAnswer:1},{id:44,difficulty:"hard",question:"What is a pulsar?",options:["A pulsating star","A rotating neutron star","A type of galaxy","A comet"],correctAnswer:1},{id:45,difficulty:"hard",question:"What is the Great Attractor?",options:["A black hole","A gravitational anomaly pulling galaxies","A supernova","A nebula"],correctAnswer:1}]},s=[{id:1,name:"Nebula Striker",description:"Fast and agile fighter craft",speed:9,color:"#0026ffff",emoji:"\uD83D\uDE80",image:"/assets/main_4_2_2.png"},{id:2,name:"Quantum UFO",description:"Advanced exploration vessel",speed:7,color:"#9d4edd",emoji:"\uD83D\uDEF8",image:"/assets/galaksi2.webp"},{id:3,name:"Stellar Phoenix",description:"Heavy combat cruiser",speed:6,color:"#ff006e",emoji:"\uD83D\uDEF0️",image:"/assets/galaksi3.webp"},{id:4,name:"Cosmic Ranger",description:"Balanced all-purpose ship",speed:8,color:"#1A5D1A",emoji:"✨",image:"/assets/galaksi4.webp"},{id:5,name:"Void Reaper",description:"Stealth reconnaissance craft",speed:10,color:"#ff9e00",emoji:"\uD83C\uDF1F",image:"/assets/galaksi5.gif"},{id:6,name:"Galaxy Titan",description:"Massive flagship carrier",speed:5,color:"#FF4646",emoji:"\uD83C\uDF20",image:"/assets/galaksi6.png"}]}},e=>{e.O(0,[441,255,358],()=>e(e.s=646)),_N_E=e.O()}]);